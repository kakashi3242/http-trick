webpackJsonp([2],{114:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(46),o=n.n(i),r=n(5),s=n.n(r),a=n(221),c=n.n(a);e.default={components:{HttpTraffic:c.a},data:function(){return{isDataCenter:!0,width:0,height:0,rows:{},smallId:3e3,bigId:0}},methods:{calcSize:function(){this.width=o()(window).width(),this.height=o()(window).height()},receiveTraffic:function(t){var e=this;if(2==t.length){var n=t[0].rows,i=t[1].rows;s.a.forEach(n,function(t){e.smallId>t.idx&&(e.smallId=t.idx),e.bigId<t.idx&&(e.bigId=t.idx),e.rows[t.idx]=t}),s.a.forEach(i,function(t){e.rows[t.idx]=s.a.assign({},e.rows[t.idx],t)})}}},computed:{total:function(){return this.bigId-this.smallId+1}},created:function(){if(this.calcSize(),o()(window).resize(s.a.debounce(this.calcSize,200)),window.io){io("/httptrafic").on("proxy",this.receiveTraffic)}}}},115:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=(n.n(i),n(222)),r=n.n(o),s=n(124),a=n.n(s),c=n(22);e.default={props:["height","width"],components:{List:r.a,ContextMenu:a.a},data:function(){return{resizeProxyVisible:!1,dragging:!1,draggingColumn:null,dragState:{},cols:[{id:"result",name:"state",width:60},{id:"protocol",name:"protocol",width:70},{id:"method",name:"method",width:70},{id:"host",name:"host",width:250},{id:"contentType",name:"content-type",width:200},{id:"body",name:"body",width:100},{id:"path",name:"path",width:0}],rightClickRow:{}}},computed:{columns:function(){for(var t=this.cols,e=0,n=0;n<t.length-1;n++)e+=t[n].width;return t[t.length-1].width=this.width-e,t}},methods:{saveData:function(){var t=this;if(!this.rightClickRow.resTime)return void this.$message({message:"服务器还没有响应",type:"warning"});this.$prompt("请输入数据文件名","保存为数据文件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;c.a.saveDataEntryFromTraffic(t.rightClickRow.idx,n,t.rightClickRow.contentType.split(";")[0]).then(function(e){var n=e.data;0==n.code?t.$message({type:"success",message:"保存成功!"}):t.$message.error("出错了，"+n.msg)})})},onCtxOpen:function(t){this.rightClickRow=this.$dc.rows[t]},onCtxClose:function(t){},resetCtxLocals:function(){this.rightClickRow={}},handleMouseMove:function(t,e){for(var n=t.target;n&&"TH"!==n.tagName;)n=n.parentNode;if(!this.dragging){var i=n.getBoundingClientRect(),o=document.body.style;i.width>12&&i.right-t.pageX<8?(o.cursor="col-resize",this.draggingColumn=e):(o.cursor="",this.draggingColumn=null)}},handleMouseDown:function(t,e,n){var i=this;if(this.draggingColumn){this.dragging=!0,this.resizeProxyVisible=!0;var o=this.$el,r=o.getBoundingClientRect().left,s=this.$el.querySelector("\t#column_"+n),a=s.getBoundingClientRect(),c=a.left-r+30;this.dragState={startMouseLeft:t.clientX,startLeft:a.right-r,startColumnLeft:a.left-r,tableLeft:r};var l=this.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var u=function(t){var e=t.clientX-i.dragState.startMouseLeft,n=i.dragState.startLeft+e;l.style.left=Math.max(c,n)+"px"},d=function t(){if(i.dragging){var n=parseInt(l.style.left,10),o=n-i.dragState.startColumnLeft;e.width=o,document.body.style.cursor="",i.dragging=!1,i.draggingColumn=null,i.dragState={},i.resizeProxyVisible=!1}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",t),document.onselectstart=null,document.ondragstart=null};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}},handleMouseOut:function(t,e){document.body.style.cursor=""}}}},116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{total:{type:Number,required:!0},height:{type:Number,required:!0},rowHeight:{type:Number,required:!0}},data:function(){return{scrollTop:0,start:0}},computed:{ids:function(){for(var t=[],e=this.start;e<this.end;e++)t.push(e);return t},contentHeight:function(){return this.rowHeight*this.total},keeps:function(){return Math.ceil(this.height/this.rowHeight)+2},end:function(){var t=this.start+this.keeps-1;return t>this.total?this.total:t},top:function(){return this.rowHeight*this.start}},methods:{handleScroll:_.debounce(function(){this.scrollTop=this.$refs.container.scrollTop;var t=Math.floor(this.scrollTop/this.rowHeight);this.start=t},100)}}},122:function(t,e){t.exports=function(t){function e(e){e.preventDefault(),"function"==typeof t&&t(e);try{stop()}catch(t){}}function n(t){27===t.keyCode&&e(t)}var i=!1;return{get isListening(){return i},start:function(t){window.addEventListener("click",e,!0),window.addEventListener("keyup",n,!0),i=!0,"function"==typeof t&&t()},stop:function(t){window.removeEventListener("click",e,!0),window.removeEventListener("keyup",n,!0),i=!1,"function"==typeof t&&t()}}}},123:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(122),o=n.n(i);e.default={name:"context-menu",props:{id:{type:String,default:"default-ctx"},ctxOpen:{type:Function},ctxCancel:{type:Function},ctxClose:{type:Function}},data:function(){var t=this;return{locals:{},align:"left",ctxTop:0,ctxLeft:0,ctxVisible:!1,bodyClickListener:o()(function(e){if(!t.ctxVisible||t.$el.contains(e.target))t.ctxVisible=!1,t.ctxClose&&t.ctxClose(t.locals);else{if(1!==e.which)return e.preventDefault(),e.stopPropagation(),!1;t.ctxVisible=!1,t.ctxCancel&&t.ctxCancel(t.locals),e.stopPropagation()}})}},methods:{setPositionFromEvent:function(t){var e=t.pageX,n=t.pageY;this.ctxTop=n-document.body.scrollTop,this.ctxLeft=e},open:function(t,e){return this.ctxVisible=!0,this.ctxOpen&&this.ctxOpen(e),this.setPositionFromEvent(t),this.$el.setAttribute("tab-index",-1),this.bodyClickListener.start(),this}},watch:{ctxVisible:function(t,e){e===!0&&t===!1&&this.bodyClickListener.stop(function(t){})}},computed:{ctxStyle:function(){return{display:this.ctxVisible?"block":"none",top:(this.ctxTop||0)+"px",left:(this.ctxLeft||0)+"px"}}}}},124:function(t,e,n){var i=n(206);i.install=function(t){return t.component("context-menu",i)},window.VueContextMenu=i,t.exports=t.exports.default=i},126:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(58),r=n.n(o),s=n(11),a=n.n(s),c=n(10),l=n.n(c),u=n(6);n.n(u);i.default.use(l.a),i.default.use(a.a),new i.default({el:"#app",render:function(t){return t(r.a)}})},158:function(t,e){},160:function(t,e){},167:function(t,e){},206:function(t,e,n){n(167);var i=n(0)(n(123),n(248),null,null);t.exports=i.exports},22:function(t,e,n){"use strict";var i=n(12),o=n.n(i),r=n(18),s=n.n(r);e.a={getDataList:function(){return o.a.get("/data/getdatalist")},saveDataList:function(t){return o.a.post("/data/savedatalist",t)},getDataFile:function(t){return o.a.get("/data/getdatafile?id="+t)},saveDataFile:function(t,e){var n=new FormData;return n.append("content",e),o.a.post("/data/savedatafile?id="+t,n)},saveDataEntryFromTraffic:function(t,e,n){return o.a.post("/data/savedatafromtraffic",{id:s()(),name:e,contenttype:n,reqid:t})}}},221:function(t,e,n){n(160);var i=n(0)(n(115),n(239),null,null);t.exports=i.exports},222:function(t,e,n){var i=n(0)(n(116),n(228),null,null);t.exports=i.exports},228:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",style:{"overflow-y":"auto",height:t.height+"px"},on:{scroll:t.handleScroll}},[n("div",{style:{height:t.contentHeight+"px"}},[n("div",{style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t._t("default",null,{ids:t.ids})],2)])])},staticRenderFns:[]}},234:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("http-traffic",{attrs:{height:t.height,width:t.width}})],1)},staticRenderFns:[]}},239:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-table el-table--fit el-table--border el-table--enable-row-hover el-table--enable-row-transition",staticStyle:{width:"100%",height:"250px"},style:{width:"100%",height:t.height+"px"}},[n("div",{staticClass:"el-table__header-wrapper"},[n("table",{staticClass:"el-table__header",staticStyle:{width:"100%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[n("colgroup",t._l(t.columns,function(t,e){return n("col",{attrs:{name:"head_col_"+e,width:t.width}})})),t._v(" "),n("thead",[n("tr",t._l(t.columns,function(e,i){return n("th",{staticStyle:{height:"22px"},attrs:{id:"column_"+i},on:{mousemove:function(n){t.handleMouseMove(n,e,i)},mousedown:function(n){t.handleMouseDown(n,e,i)},mouseout:function(n){t.handleMouseOut(n,e,i)}}},[n("div",{staticClass:"cell"},[t._v(t._s(e.name))])])}))])])]),t._v(" "),n("div",{staticClass:"el-table__body-wrapper"},[n("list",{attrs:{total:t.$dc.total,height:t.height-22,rowHeight:23},scopedSlots:t._u([{key:"default",fn:function(e){return[n("table",{staticClass:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[n("colgroup",t._l(t.columns,function(t,e){return n("col",{attrs:{name:"body_col_"+e,width:t.width}})})),t._v(" "),t._l(e.ids,function(e){return n("tr",{on:{contextmenu:function(n){n.preventDefault(),t.$refs.ctx.open(n,e+t.$dc.smallId)}}},t._l(t.columns,function(i){return n("td",[n("div",{staticClass:"cell",style:{width:i.width+"px"}},[t._v(t._s(t.$dc.rows[e+t.$dc.smallId][i.id]))])])}))})],2)]}}])})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"}),t._v(" "),n("context-menu",{ref:"ctx",attrs:{id:"testingctx",ctxOpen:t.onCtxOpen,ctxCancel:t.resetCtxLocals,ctxClose:t.onCtxClose}},[n("li",{staticClass:"ctx-item",on:{click:t.saveData}},[t._v("保存为mock数据")]),t._v(" "),n("li",{staticClass:"ctx-item"},[t._v("复制url")]),t._v(" "),n("li",{staticClass:"ctx-item"},[t._v("复制Header")])])],1)},staticRenderFns:[]}},248:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"contextMenu",staticClass:"ctx-menu-container",style:t.ctxStyle,attrs:{id:t.id},on:{click:function(t){t.stopPropagation()},contextmenu:function(t){t.stopPropagation()}}},[n("div",{staticClass:"ctx open",staticStyle:{"background-color":"transparent"}},[n("ul",{staticClass:"ctx-menu",class:{"ctx-menu-right":"right"===t.align,"ctx-menu-left":"left"===t.align},attrs:{role:"menu"}},[t._t("default")],2)])])},staticRenderFns:[]}},58:function(t,e,n){n(158);var i=n(0)(n(114),n(234),null,null);t.exports=i.exports},6:function(t,e){}},[126]);
//# sourceMappingURL=monitor.js.map