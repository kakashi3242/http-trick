# 规则编辑界面

<img src="https://img.yzcdn.cn/public_files/2017/03/06/6d63f6c6fbba25fd262fedd0f5b90608.png">

## 名词解析

### 1. `本地工程地址占位符`

该占位符用于指定某工程在本地计算机文件系统的地址。占位符格式为`<%=projectName%>`。

该占位符在`ZanMock-proxy`中`配置管理`中设置。

## 编辑页面组成

#### 一. 条件

条件框分给两个组成部分

1. 请求方式
2. 匹配规则

__请求方式__

请求方式中可以选择包含`GET`，`POST`，`PUT`以及`全部`，你可以选择不同的请求方式对你需要转发的请求进行定义。

**_注意，当`动作`被设定为文件转发时，请求方式默认为`GET`且无法修改_**

__匹配规则__

匹配规则为该请求是否被`ZanMock-proxy`所转发的主要判定方式。其判定规则如下：

1. 优先将匹配规则当成一个字符去匹配所有请求，当某一请求的url中包含匹配规则，则视为该请求符合该匹配规则。
2. 当规则1无法匹配时，将该匹配规则实例化为一个正则表达式，再对所有请求进行匹配（RegExp.prototype.test方法）。

#### 二. 动作

在`ZanMock-proxy`中动作分为两类，`文件转发`，`请求转发`。

`文件转发`特别用于js/css等静态文件的转发。

`请求转发`可快速用于接口的mock。

#### 三. 处理类型

_**注意，选中的tab即为对该请求的处理方式**_

**1. 转发**

用于`文件转发``动作`，可将文件请求代理到本地或者远程地址。

`ZanMock-proxy`判断地址类型(远程/本地)是通过你在`转发`tab下填写的内容格式。如你填写的内容已`http`开头，则视为远程地址，否则为本地地址。

当代理到本地时，你可使用`本地工程地址占位符`，方便规则共享。

**2. 返回空文件**

用于`文件转发``动作`，方便直接返回空内容。

**3. 哆啦A梦**

用于`接口转发``动作`，将接口转发到哆啦A梦进行mock。

**4. 替换为指定内容**

用于`接口转发``动作`，方便用户临时将接口返回值替换为指定内容。

#### 四. 进阶

在使用正则写`匹配规则`时，`ZanMock-proxy`支持在`处理类型`的`转发`中写`$`占位符，用于替换为正则匹配后的`获取组`。

e.g.

请求url为：https://b.yzcdn.cn/v2/build/wap/showcase/sku_58590c11af.js

要拦截的请求的url特征为：`build/wap/(.*?)_[^_]*$`

请求转发路径为：<%=wapproject%>/js/$1/main.js。

则最终请求路径中的`$1`将被替换为`showcase/sku`
