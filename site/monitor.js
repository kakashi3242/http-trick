!function(e){function t(t){for(var n,c,a=t[0],s=t[1],u=t[2],d=0,p=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==i[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},i={2:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var a=window.webpackJsonp=window.webpackJsonp||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=s;o.push([358,0]),r()}({140:function(e,t){e.exports=function(e){var t=!1;return{get isListening(){return t},start:function(e){window.addEventListener("click",r,!0),window.addEventListener("keyup",n,!0),t=!0,"function"==typeof e&&e()},stop:function(e){window.removeEventListener("click",r,!0),window.removeEventListener("keyup",n,!0),t=!1,"function"==typeof e&&e()}};function r(t){t.preventDefault(),"function"==typeof e&&e(t);try{stop()}catch(t){}}function n(e){27===e.keyCode&&r(e)}}},3:function(e,t,r){"use strict";var n=r(0),i=r.n(n);t.a={saveFile:function(e){return i.a.post("/profile/savefile",e)},disableRule:function(){return i.a.post("/profile/setRuleState")},enableRule:function(){return i.a.post("/profile/setRuleState?rulestate=1")},disableHost:function(){return i.a.post("/profile/setHostState")},enableHost:function(){return i.a.post("/profile/setHostState?hoststate=1")},disableFilter:function(){return i.a.post("/profile/setFilterState")},enableFilter:function(){return i.a.post("/profile/setFilterState?filterstate=1")},getUserId:function(){return i.a.get("/profile/getUserId")},getUserInfo:function(){return i.a.get("/profile/getUserInfo")},setUserId:function(e){return i.a.get("/profile/setUserId?userId=".concat(e))},unBind:function(e){return i.a.get("/profile/device/unbind?deviceId=".concat(e))},setDeviceName:function(e,t){return i.a.get("/profile/device/setName?deviceId=".concat(e,"&name=").concat(encodeURI(t)))},disableMonitor:function(e){return i.a.get("/profile/device/disableMonitor?deviceId=".concat(e))},deviceUseHost:function(e,t){return i.a.get("/profile/device/usehost?deviceId=".concat(e,"&hostname=").concat(encodeURI(t)))},enableMonitor:function(e){return i.a.get("/profile/device/enableMonitor?deviceId=".concat(e))},setExternalProxy:function(e,t){return t.deviceId=e,i.a.post("/profile/device/externalProxy",t)}}},345:function(e,t,r){"use strict";var n=r(54);r.n(n).a},346:function(e,t,r){},347:function(e,t,r){},348:function(e,t,r){},351:function(e,t,r){},352:function(e,t,r){},353:function(e,t,r){},354:function(e,t,r){},355:function(e,t,r){},356:function(e,t,r){},358:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"recordTotalCount",(function(){return ht})),r.d(n,"deviceIdNameMap",(function(){return mt})),r.d(n,"currentDeviceId",(function(){return gt})),r.d(n,"currentSelectRecord",(function(){return yt})),r.d(n,"rightClickedRecord",(function(){return bt})),r.d(n,"rightClickedDevice",(function(){return _t}));var i={};r.r(i),r.d(i,"initStore",(function(){return wt})),r.d(i,"toggleRecordState",(function(){return Pt})),r.d(i,"setFilter",(function(){return jt})),r.d(i,"selectRecordById",(function(){return St})),r.d(i,"clearMonitorData",(function(){return qt}));var o={};r.r(o),r.d(o,"setUserInfo",(function(){return Ft})),r.d(o,"setAppInfo",(function(){return Lt})),r.d(o,"setBindedDeviceList",(function(){return Mt})),r.d(o,"setHostFileList",(function(){return $t})),r.d(o,"setRightClickedRecordId",(function(){return Bt})),r.d(o,"setRightClickedDeviceId",(function(){return Tt})),r.d(o,"setTraffic",(function(){return Ut})),r.d(o,"setLocalFilter",(function(){return At})),r.d(o,"setMonitorState",(function(){return Vt})),r.d(o,"clearLocalMonitorData",(function(){return Qt}));r(89);var c=r(55),a=r.n(c),s=(r(138),r(4)),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app",attrs:{id:"app"}},[r("div",{staticClass:"op-bar"},[r("span",{staticClass:"icon-btn",class:{overflow:e.monitorState.overflow},on:{click:e.toggleRecordState}},[e.monitorState.stopRecord?r("i",{staticClass:"el-icon-video-play bofang"}):r("i",{staticClass:"el-icon-video-pause zanting"})]),e._v(" "),r("i",{staticClass:"iconfont icon-qingchu icon-btn",on:{click:e.clearMonitorData}}),e._v(" "),r("span",{staticClass:"tips ",style:{visibility:e.monitorState.overflow?"initial":"hidden"}},[e._v("记录已满，请清除历史记录")]),e._v(" "),r("span",{staticClass:"filters"},[e._v("\n            Filter:\n            "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterForm.host,expression:"filterForm.host"}],attrs:{placeholder:"Host"},domProps:{value:e.filterForm.host},on:{input:function(t){t.target.composing||e.$set(e.filterForm,"host",t.target.value)}}}),e._v("\n            /\n            "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.filterForm.path,expression:"filterForm.path"}],attrs:{placeholder:"Path"},domProps:{value:e.filterForm.path},on:{input:function(t){t.target.composing||e.$set(e.filterForm,"path",t.target.value)}}}),e._v(" "),r("i",{staticClass:"iconfont icon-sousuo search"})]),e._v(" "),r("div",{staticClass:"placeholder"}),e._v(" "),r("a",{staticClass:"goto-manager",attrs:{href:"/index.html",target:"_blank"}},[r("el-button",{attrs:{type:"text"}},[e._v("管理")])],1),e._v(" "),e.appInfo.single?e._e():r("a",{staticClass:"username",attrs:{href:"javascript:void(0)"}},[r("el-button",{attrs:{type:"text"}},[e._v(e._s(e.userInfo.userId))])],1)]),e._v(" "),r("div",{staticClass:"monitor",style:{height:e.contentHeight+"px"}},[r("device-list"),e._v(" "),r("http-traffic",{attrs:{height:e.contentHeight}}),e._v(" "),r("detail")],1)])};u._withStripped=!0;var l=r(2),d=r(56),p=r.n(d),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"traffic"},[e._m(0),e._v(" "),r("list",{attrs:{total:e.recordTotalCount,height:e.height-28,rowHeight:24},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.ids,(function(t){return r("record",{key:t,attrs:{index:t,id:e.filteredRecordArray[t]},on:{"right-clicked":e.rightClicked}})}))}}])}),e._v(" "),r("context-menu",{ref:"ctx",attrs:{id:"testingctx",ctxOpen:e.onCtxOpen,ctxCancel:e.resetCtxLocals,ctxClose:e.onCtxClose}},[r("li",{staticClass:"ctx-item",on:{click:e.saveData}},[e._v("保存为mock数据")]),e._v(" "),r("li",{staticClass:"ctx-item",on:{click:e.copyUrl}},[e._v("复制url")])])],1)};f._withStripped=!0;var v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"container",style:{"overflow-y":"auto",height:e.height+"px"},on:{scroll:function(t){return t.preventDefault(),e.handleScroll(t)}}},[r("div",{style:{height:e.contentHeight+"px"}},[r("div",{style:{transform:"translate3d(0,"+e.top+"px,0)"}},[e._t("default",null,{ids:e.ids})],2)])])};v._withStripped=!0;var h=r(139),m={props:{total:{type:Number,required:!0},height:{type:Number,required:!0},rowHeight:{type:Number,required:!0}},data:function(){return{scrollTop:0,start:0}},computed:{ids:function(){for(var e=[],t=this.start;t<this.end;t++)e.push(t);return e},contentHeight:function(){return this.rowHeight*this.total},keeps:function(){return Math.ceil(this.height/this.rowHeight)+2},end:function(){var e=this.start+20+this.keeps-1;return(e+=20)>this.total?this.total:e},top:function(){return this.rowHeight*this.start}},methods:{handleScroll:r.n(h)()((function(){var e=this.$refs.container.scrollTop,t=Math.floor(e/this.rowHeight);this.start=t<20?0:t-20}),100)}},g=r(1),y=Object(g.a)(m,v,[],!1,null,null,null);y.options.__file="src/pages/monitor/components/traffic/List.vue";var b=y.exports,_=r(9),x=r.n(_),C=r(57),k=r.n(C),w=r(8),O=(r(346),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"record row",class:{selected:e.selectRecordId==e.id,"right-clicked":e.rightClickRecordId==e.id},on:{click:function(t){return e.clickRow(e.id)},contextmenu:function(t){return t.preventDefault(),e.rightClicked(t,e.id)}}},[r("div",{staticClass:"cell cell-index"},[e._v(e._s(e.index+1))]),e._v(" "),r("div",{staticClass:"cell cell-status"},[e._v(e._s(e.status))]),e._v(" "),r("div",{staticClass:"cell cell-method"},[e._v(e._s(e.method))]),e._v(" "),r("div",{staticClass:"cell cell-protocol"},[e._v(e._s(e.protocol))]),e._v(" "),r("div",{staticClass:"cell cell-host"},[e._v(e._s(e.host))]),e._v(" "),r("div",{staticClass:"cell cell-path"},[e._v(e._s(e.pathname))]),e._v(" "),r("div",{staticClass:"cell cell-type"},[e._v(e._s(e.type))]),e._v(" "),r("div",{staticClass:"cell cell-device"},[e._v(e._s(e.device))]),e._v(" "),r("div",{staticClass:"cell cell-time"},[e._v(e._s(e.duration))])])});function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}O._withStripped=!0;var D={props:["index","id"],computed:R({},Object(l.e)(["selectRecordId","rightClickRecordId","recordMap"]),{},Object(l.c)(["deviceIdNameMap"]),{row:function(){return this.recordMap[this.id]},status:function(){try{return this.row.response.statusCode}catch(e){return""}},method:function(){return this.row.originRequest.method},protocol:function(){return this.row.originRequest.protocol},host:function(){return this.row.originRequest.host},pathname:function(){return this.row.originRequest.pathname},type:function(){try{return this.row.originRequest.headers["content-type"]}catch(e){return""}},device:function(){try{var e=this.row.originRequest.deviceId;return this.deviceIdNameMap[e]}catch(e){return""}},duration:function(){try{return this.row.response.remoteResponseEndTime-this.row.response.remoteRequestBeginTime}catch(e){return""}}}),methods:R({},Object(l.b)(["selectRecordById"]),{clickRow:function(e){this.selectRecordById(e)},rightClicked:function(e,t){this.$emit("right-clicked",e,t)}})},S=Object(g.a)(D,O,[],!1,null,null,null);S.options.__file="src/pages/monitor/components/traffic/record.vue";var I=S.exports;function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N={props:["height"],components:{List:b,ContextMenu:k.a,Record:I},data:function(){return{}},computed:H({},Object(l.e)(["rightClickedRecordId","filteredRecordArray"]),{},Object(l.c)(["rightClickedRecord","recordTotalCount"])),methods:H({},Object(l.b)([]),{},Object(l.d)(["setRightClickedRecordId"]),{saveData:function(){var e=this;this.rightClickedRecord.response?this.$prompt("请输入数据文件名","保存为数据文件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){var r=t.value;w.a.saveDataEntryFromTraffic(e.rightClickedRecordId,r,e.rightClickedRecord.response.headers["content-type"].split(";")[0]).then((function(t){var r=t.data;0==r.code?e.$message({showClose:!0,type:"success",message:"保存成功!"}):e.$message.error("出错了，".concat(r.msg))}))})):this.$message({showClose:!0,message:"服务器还没有响应",type:"warning"})},copyUrl:function(){var e=this.rightClickedRecord.originRequest;x()("".concat(e.protocol,"//").concat(e.host,":").concat(e.port).concat(e.path)),this.$message("已将url复制到剪切板")},onCtxOpen:function(e){this.setRightClickedRecordId(e)},rightClicked:function(e,t){this.$refs.ctx.open(e,t)},onCtxClose:function(e){},resetCtxLocals:function(){this.setRightClickedRecordId("")}})},F=Object(g.a)(N,f,[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header row"},[r("div",{staticClass:"cell cell-index"},[e._v("#")]),e._v(" "),r("div",{staticClass:"cell cell-status"},[e._v("Status")]),e._v(" "),r("div",{staticClass:"cell cell-method"},[e._v("Method")]),e._v(" "),r("div",{staticClass:"cell cell-protocol"},[e._v("Protocol")]),e._v(" "),r("div",{staticClass:"cell cell-host"},[e._v("Host")]),e._v(" "),r("div",{staticClass:"cell cell-path"},[e._v("Path")]),e._v(" "),r("div",{staticClass:"cell cell-type"},[e._v("Type")]),e._v(" "),r("div",{staticClass:"cell cell-device"},[e._v("Device")]),e._v(" "),r("div",{staticClass:"cell cell-time"},[e._v("Time")])])}],!1,null,null,null);F.options.__file="src/pages/monitor/components/traffic/HttpTraffic.vue";var L=F.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"detail",style:{height:e.height+"px"}},[r("div",{staticClass:"detail__header"},[r("div",{staticClass:"detail__tab",class:{active:"Origin"==e.activeName},on:{click:function(t){return e.tabClick("Origin")}}},[e._v("原始请求")]),e._v(" "),r("div",{staticClass:"detail__tab",class:{active:"Request"==e.activeName},on:{click:function(t){return e.tabClick("Request")}}},[e._v("Request")]),e._v(" "),r("div",{staticClass:"detail__tab",class:{active:"Response"==e.activeName},on:{click:function(t){return e.tabClick("Response")}}},[e._v("Response")]),e._v(" "),r("div",{staticClass:"detail__tab",class:{active:"Timeline"==e.activeName},on:{click:function(t){return e.tabClick("Timeline")}}},[e._v("Timeline")])]),e._v(" "),r("div",{staticClass:"detail__body"},["Origin"==e.activeName?r("div",[r("origin")],1):e._e(),e._v(" "),"Request"==e.activeName?r("div",[r("request-detail")],1):e._e(),e._v(" "),"Response"==e.activeName?r("div",[r("response-detail")],1):e._e(),e._v(" "),"Timeline"==e.activeName?r("div",[r("timeline")],1):e._e()])])};M._withStripped=!0;var $=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"request"},[r("div",{staticClass:"request__header"},[r("div",{staticClass:"request__tab",class:{active:"Header"==e.activeName},on:{click:function(t){return e.tabClick("Header")}}},[e._v("Header\n        ")]),e._v(" "),r("div",{staticClass:"request__tab",class:{active:"Cookie"==e.activeName},on:{click:function(t){return e.tabClick("Cookie")}}},[e._v("Cookie\n        ")]),e._v(" "),r("div",{staticClass:"request__tab",class:{active:"Query Params"==e.activeName},on:{click:function(t){return e.tabClick("Query Params")}}},[e._v("Query Params\n        ")]),e._v(" "),r("div",{staticClass:"request__tab",class:{active:"Body"==e.activeName},on:{click:function(t){return e.tabClick("Body")}}},[e._v("Body")])]),e._v(" "),r("div",{staticClass:"request__body"},["Header"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.requestHeader}})],1):e._e(),e._v(" "),"Cookie"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.requestCookie}})],1):e._e(),e._v(" "),"Query Params"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.requestQueryParams}})],1):e._e(),e._v(" "),"Body"==e.activeName?r("div",{staticClass:"text-area"},[e._v(e._s(e.currentRequestBody))]):e._e()])])};$._withStripped=!0;var B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"keyvalue-wrapper"},[e._l(e.data,(function(t,n){return[r("div",{staticClass:"row"},[r("div",{staticClass:"name"},[e._v(e._s(n))]),e._v(" "),r("div",{staticClass:"value"},[e._v(e._s(t))])])]}))],2)};B._withStripped=!0;r(347);var T={props:["data"]},U=Object(g.a)(T,B,[],!1,null,null,null);U.options.__file="src/pages/monitor/components/detail/KeyValueList.vue";var A=U.exports,V=(r(348),r(0)),Q=r.n(V),z=r(141),J=r.n(z);function K(e,t,r,n,i,o,c){try{var a=e[o](c),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,i)}function W(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function c(e){K(o,n,i,c,a,"next",e)}function a(e){K(o,n,i,c,a,"throw",e)}c(void 0)}))}}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=W(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("/traffic/getResponseBody?id=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function G(e){return Z.apply(this,arguments)}function Z(){return(Z=W(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("/traffic/getRequestBody?id=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=W(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("/traffic/stopRecord?stop=".concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function re(){return ne.apply(this,arguments)}function ne(){return(ne=W(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("/traffic/clear");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=W(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.get("/traffic/setfilter?path=".concat(t.path,"&host=").concat(t.host));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var ce=/; */,ae=decodeURIComponent;function se(e,t){try{return t(e)}catch(t){return e}}function ue(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var r={},n=t||{},i=e.split(ce),o=n.decode||ae,c=0;c<i.length;c++){var a=i[c],s=a.indexOf("=");if(!(s<0)){var u=a.substr(0,s).trim(),l=a.substr(++s,a.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),null==r[u]&&(r[u]=se(l,o))}}return r}function le(e){return!e||e.indexOf("?")<0?{}:J.a.parse(e.split("?")[1])}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe={components:{KeyValueList:A},data:function(){return{activeName:"Header"}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(r,!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(l.e)(["currentRequestBody"]),{},Object(l.c)(["currentSelectRecord"]),{requestHeader:function(){try{return this.currentSelectRecord.requestData.headers}catch(e){return{}}},requestCookie:function(){try{return ue(this.currentSelectRecord.requestData.headers.cookie||"")}catch(e){return{}}},requestQueryParams:function(){try{return le(this.currentSelectRecord.requestData.path)}catch(e){return{}}}}),methods:{tabClick:function(e){this.activeName=e}}},ve=Object(g.a)(fe,$,[],!1,null,null,null);ve.options.__file="src/pages/monitor/components/detail/RequestDetail.vue";var he=ve.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"response"},[r("div",{staticClass:"response__header"},[r("div",{staticClass:"response__tab",class:{active:"Header"==e.activeName},on:{click:function(t){return e.tabClick("Header")}}},[e._v("Header\n        ")]),e._v(" "),r("div",{staticClass:"response__tab",class:{active:"Set Cookies"==e.activeName},on:{click:function(t){return e.tabClick("Set Cookies")}}},[e._v("\n            Set Cookies\n        ")]),e._v(" "),r("div",{staticClass:"response__tab",class:{active:"Body"==e.activeName},on:{click:function(t){return e.tabClick("Body")}}},[e._v("Body")])]),e._v(" "),r("div",{staticClass:"response__body"},["Header"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.responseHeader}})],1):e._e(),e._v(" "),"Set Cookies"==e.activeName?r("div",{staticClass:"set-cookies"},e._l(e.setCookies,(function(t){return r("div",{staticClass:"cookie-row"},[e._v("\n                "+e._s(t)+"\n            ")])})),0):e._e(),e._v(" "),"Body"==e.activeName?r("div",{staticClass:"text-area"},[e._v(e._s(e.currentResponseBody))]):e._e()])])};me._withStripped=!0;r(351);function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be={components:{KeyValueList:A},data:function(){return{activeName:"Header"}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(r,!0).forEach((function(t){ye(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(l.e)(["currentResponseBody"]),{},Object(l.c)(["currentSelectRecord"]),{responseHeader:function(){try{var e=Object.assign({},this.currentSelectRecord.response.headers);return delete e["set-cookie"],e}catch(e){return{}}},setCookies:function(){try{return this.currentSelectRecord.response.headers["set-cookie"]||[]}catch(e){return[]}}}),methods:{tabClick:function(e){this.activeName=e}}},_e=Object(g.a)(be,me,[],!1,null,null,null);_e.options.__file="src/pages/monitor/components/detail/ResponseDetail.vue";var xe=_e.exports,Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"origin"},[r("div",{staticClass:"request__header"},[r("div",{staticClass:"request__tab",class:{active:"Header"==e.activeName},on:{click:function(t){return e.tabClick("Header")}}},[e._v("Header\n        ")]),e._v(" "),r("div",{staticClass:"request__tab",class:{active:"Cookie"==e.activeName},on:{click:function(t){return e.tabClick("Cookie")}}},[e._v("Cookie\n        ")]),e._v(" "),r("div",{staticClass:"request__tab",class:{active:"Query Params"==e.activeName},on:{click:function(t){return e.tabClick("Query Params")}}},[e._v("Query Params\n        ")])]),e._v(" "),r("div",{staticClass:"request__body"},["Header"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.originRequestHeader}})],1):e._e(),e._v(" "),"Cookie"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.originRequestCookie}})],1):e._e(),e._v(" "),"Query Params"==e.activeName?r("div",[r("key-value-list",{attrs:{data:e.originRequestQueryParams}})],1):e._e()])])};Ce._withStripped=!0;r(352);function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe={components:{KeyValueList:A},data:function(){return{activeName:"Header"}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(r,!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(l.c)(["currentSelectRecord"]),{originRequestHeader:function(){try{return this.currentSelectRecord.originRequest.headers}catch(e){return{}}},originRequestCookie:function(){try{return ue(this.currentSelectRecord.originRequest.headers.cookie||"")}catch(e){return{}}},originRequestQueryParams:function(){try{return le(this.currentSelectRecord.originRequest.path)}catch(e){return{}}}}),methods:{tabClick:function(e){this.activeName=e}}},Pe=Object(g.a)(Oe,Ce,[],!1,null,null,null);Pe.options.__file="src/pages/monitor/components/detail/Origin.vue";var Re=Pe.exports,je=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("key-value-list",{attrs:{data:this.timeline}})],1)};je._withStripped=!0;var De={components:{KeyValueList:A},computed:{timeline:function(){return{"请求":""}}}},Se=Object(g.a)(De,je,[],!1,null,null,null);Se.options.__file="src/pages/monitor/components/detail/Timeline.vue";var Ie=Se.exports,qe=(r(353),{props:["height"],components:{RequestDetail:he,ResponseDetail:xe,Origin:Re,Timeline:Ie},data:function(){return{activeName:"Origin"}},methods:{tabClick:function(e){this.activeName=e}}}),He=Object(g.a)(qe,M,[],!1,null,null,null);He.options.__file="src/pages/monitor/components/detail/Detail.vue";var Ee=He.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"device-list"},[r("div",{staticClass:"title"},[e._v("绑定的设备")]),e._v(" "),r("div",{staticClass:"list-wrapper"},e._l(e.bindedDeviceList,(function(t,n){return r("device",{key:n,attrs:{device:t},on:{"right-clicked":e.rightClicked}})})),1),e._v(" "),r("div",{staticClass:"qr-code-wrapper"},[r("div",{staticClass:"qr-code"},[r("div",{staticClass:"title"},[e._v("扫码绑定设备")]),e._v(" "),r("div",{staticClass:"qrcode"},[r("img",{staticClass:"bind-qrcode",attrs:{src:e.imgUrl}})]),e._v(" "),r("div",{staticClass:"bottom"},[r("el-button",{attrs:{type:"text"},on:{click:e.copyBindUrl}},[e._v("点击复制绑定链接")])],1)])]),e._v(" "),r("context-menu",{ref:"ctx",attrs:{id:"testingctx",ctxOpen:e.onCtxOpen,ctxCancel:e.resetCtxLocals,ctxClose:e.onCtxClose}},[r("li",{staticClass:"ctx-item",on:{click:e.renameDevice}},[e._v("取别名")]),e._v(" "),r("li",{staticClass:"ctx-item",on:{click:e.changeHost}},[e._v("修改host")]),e._v(" "),r("li",{staticClass:"ctx-item",on:{click:e.configExternalProxy}},[e._v("设置外部代理")]),e._v(" "),r("li",{staticClass:"ctx-item",on:{click:e.removeDevice}},[e._v("删除设备")]),e._v(" "),e.rightClickedDevice.disableMonitor?e._e():r("li",{staticClass:"ctx-item",on:{click:e.disableMonitor}},[e._v("停止监控")]),e._v(" "),e.rightClickedDevice.disableMonitor?r("li",{staticClass:"ctx-item",on:{click:e.enableMonitor}},[e._v("开启监控")]):e._e()]),e._v(" "),r("el-dialog",{attrs:{title:e.chooseHostTitle,visible:e.showChoseHostFile,width:"30%",center:""},on:{"update:visible":function(t){e.showChoseHostFile=t}}},[r("div",{staticClass:"hostfile-list"},[r("div",{on:{click:function(t){return e.useHost("")}}},[r("el-tag",{class:{"used-host":!e.rightClickedDevice.hostFileName}},[e._v("\n                    用户默认\n                ")])],1),e._v(" "),e._l(e.hostFileList,(function(t,n){return r("div",{key:t.name,on:{click:function(r){return e.useHost(t.name)}}},[r("el-tag",{class:{"used-host":t.name==e.rightClickedDevice.hostFileName}},[e._v("\n                    "+e._s(t.name)+"\n                ")])],1)})),e._v(" "),r("div",{staticClass:"fake-tag"}),e._v(" "),r("div",{staticClass:"fake-tag"}),e._v(" "),r("div",{staticClass:"fake-tag"})],2)]),e._v(" "),r("el-dialog",{attrs:{title:e.setExternalProxyTitle,visible:e.showSetExternalProxy,width:"30%",center:""},on:{"update:visible":function(t){e.showSetExternalProxy=t}}},[r("div",{staticClass:"gateway"},[r("el-form",{attrs:{"label-width":"100px",model:e.currentProxy}},[r("el-form-item",{attrs:{label:"使用用户设置"}},[r("el-checkbox",{model:{value:e.currentProxy.canUseUserSetting,callback:function(t){e.$set(e.currentProxy,"canUseUserSetting",t)},expression:"currentProxy.canUseUserSetting"}},[e._v("允许")])],1),e._v(" "),r("el-form-item",{attrs:{label:"代理"}},[r("el-checkbox",{model:{value:e.currentProxy.enable,callback:function(t){e.$set(e.currentProxy,"enable",t)},expression:"currentProxy.enable"}},[e._v("开启")])],1),e._v(" "),r("el-form-item",{attrs:{label:"代理类型"}},[r("el-radio-group",{model:{value:e.currentProxy.type,callback:function(t){e.$set(e.currentProxy,"type",t)},expression:"currentProxy.type"}},[r("el-radio",{attrs:{label:"socks5"}},[e._v("Socks5代理")]),e._v(" "),r("el-radio",{attrs:{label:"http"}},[e._v("Http代理")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"IP"}},[r("el-input",{model:{value:e.currentProxy.ip,callback:function(t){e.$set(e.currentProxy,"ip",t)},expression:"currentProxy.ip"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"端口"}},[r("el-input",{model:{value:e.currentProxy.port,callback:function(t){e.$set(e.currentProxy,"port",t)},expression:"currentProxy.port"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitExternalProxy}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.resetExternalProxy}},[e._v("重置")])],1)],1)],1)])],1)};Ne._withStripped=!0;r(354);var Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"device",on:{contextmenu:function(t){return t.preventDefault(),e.rightClicked(t,e.device.id)}}},[r("div",{key:"name",staticClass:"name"},[e._v("Name: "+e._s(e.device.name)),e.currentDeviceId==e.device.id?r("span",{staticStyle:{color:"#eab700"}},[e._v("(本机)")]):e._e()]),e._v(" "),e.device.hostFileName?r("div",{key:"host",staticClass:"host"},[e._v("HOST: "+e._s(e.device.hostFileName))]):e._e(),e._v(" "),r("div",{key:"id",staticClass:"id"},[e._v("ID: "+e._s(e.device.id))]),e._v(" "),e.device.disableMonitor?r("div",{staticClass:"status offline"}):e._e(),e._v(" "),e.device.disableMonitor?e._e():r("div",{staticClass:"status online"}),e._v(" "),e.proxy?r("div",{staticClass:"id"},[e._v("代理:"+e._s(e.proxy))]):e._e()])};Fe._withStripped=!0;r(355);function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $e={name:"Device",props:["device"],computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(r,!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(l.c)(["currentDeviceId"]),{proxy:function(){var e=this.device,t=e.externalProxy,r=e.externalSocks5Proxy?"socks5":"http",n="",i="",o=e.externalProxyCanUseUserSetting;return e.externalSocks5Proxy?(n=e.socks5Ip,i=e.socks5Port):(n=e.httpIp,i=e.httpPort),!(!t&&!o)&&(t?"".concat(r,"://").concat(n,":").concat(i):"使用用户设置")}}),methods:{requestRemoveDevice:function(){},requestSetName:function(){},setName:function(e,t){},rightClicked:function(e,t){this.$emit("right-clicked",e,t)}}},Be=Object(g.a)($e,Fe,[],!1,null,null,null);Be.options.__file="src/pages/monitor/components/device/Device.vue";var Te,Ue=Be.exports,Ae=r(31),Ve=r.n(Ae),Qe=r(3);function ze(e,t,r,n,i,o,c){try{var a=e[o](c),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,i)}function Je(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function c(e){ze(o,n,i,c,a,"next",e)}function a(e){ze(o,n,i,c,a,"throw",e)}c(void 0)}))}}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(r,!0).forEach((function(t){Xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye,Ge,Ze,et={name:"DeviceList",components:{Device:Ue,ContextMenu:k.a},data:function(){return{showChoseHostFile:!1,showSetExternalProxy:!1,currentProxy:{canUseUserSetting:!1,enable:!1,type:"http",ip:"",port:""}}},computed:We({},Object(l.e)(["appInfo","userInfo","rightClickedDeviceId","bindedDeviceList","hostFileList"]),{},Object(l.c)(["rightClickedDevice"]),{bindUrl:function(){return"http://".concat(this.appInfo.pcIp,":").concat(this.appInfo.webUiPort,"/profile/device/bind?userId=").concat(this.userInfo.userId)},imgUrl:function(){return Ve.a.toDataURL(this.bindUrl,4)},chooseHostTitle:function(){return"选择".concat(this.rightClickedDevice.name,"使用的Host文件")},setExternalProxyTitle:function(){return"设置".concat(this.rightClickedDevice.name,"的外部代理")}}),methods:We({},Object(l.d)(["setRightClickedDeviceId"]),(Te={copyBindUrl:function(){x()(this.bindUrl),this.$message("已将设备绑定链接复制到剪切板，在设备中打开此url即可绑定设备")},changeHost:function(){this.showChoseHostFile=!0},useHost:(Ze=Je(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.showChoseHostFile=!1,r=t==this.rightClickedDevice.hostFileName?"":t,e.next=4,Qe.a.deviceUseHost(this.rightClickedDeviceId,r);case 4:this.$message({type:"success",message:r?"设置Host成功":"取消Host成功"});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return Ze.apply(this,arguments)}),removeDevice:(Ge=Je(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe.a.unBind(t.id);case 2:this.$message("解绑成功");case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return Ge.apply(this,arguments)}),renameDevice:function(){var e=this;this.$prompt("请输入设备名字","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t=Je(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.value,t.next=3,Qe.a.setDeviceName(e.rightClickedDeviceId,n);case 3:e.$message({type:"success",message:"设备命名成功"});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){}))}},Xe(Te,"removeDevice",(function(){var e=this;this.$confirm("此操作将永久删除该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Je(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Qe.a.unBind(e.rightClickedDeviceId);case 2:e.$message({type:"success",message:"删除成功!"});case 3:case"end":return t.stop()}}),t)})))).catch((function(){}))})),Xe(Te,"disableMonitor",(function(){Qe.a.disableMonitor(this.rightClickedDeviceId)})),Xe(Te,"enableMonitor",(function(){Qe.a.enableMonitor(this.rightClickedDeviceId)})),Xe(Te,"configExternalProxy",(function(){this.resetExternalProxy(),this.showSetExternalProxy=!0})),Xe(Te,"resetExternalProxy",(function(){var e=this.rightClickedDevice,t=e.externalProxyCanUseUserSetting,r=!1,n="socks5",i="",o="";e&&(r=e.externalProxy,n=e.externalSocks5Proxy?"socks5":"http",e.externalSocks5Proxy?(i=e.socks5Ip,o=e.socks5Port):(i=e.httpIp,o=e.httpPort)),this.currentProxy={canUseUserSetting:t,enable:r,type:n,ip:i,port:o}})),Xe(Te,"submitExternalProxy",(Ye=Je(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qe.a.setExternalProxy(this.rightClickedDeviceId,this.currentProxy),this.showSetExternalProxy=!1,this.$message("解绑成功");case 3:case"end":return e.stop()}}),e,this)}))),function(){return Ye.apply(this,arguments)})),Xe(Te,"onCtxOpen",(function(e){this.setRightClickedDeviceId(e)})),Xe(Te,"rightClicked",(function(e,t){this.$refs.ctx.open(e,t)})),Xe(Te,"onCtxClose",(function(e){})),Xe(Te,"resetCtxLocals",(function(){this.setRightClickedDeviceId("")})),Te))},tt=Object(g.a)(et,Ne,[],!1,null,null,null);tt.options.__file="src/pages/monitor/components/device/DeviceList.vue";var rt=tt.exports,nt=r(15),it=r.n(nt);function ot(e,t,r,n,i,o,c){try{var a=e[o](c),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,i)}function ct(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function c(e){ot(o,n,i,c,a,"next",e)}function a(e){ot(o,n,i,c,a,"throw",e)}c(void 0)}))}}function at(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function st(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?at(r,!0).forEach((function(t){ut(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):at(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lt,dt,pt={components:{HttpTraffic:L,Detail:Ee,DeviceList:rt},data:function(){return{width:0,contentHeight:0,filterForm:{host:"",path:""}}},computed:st({},Object(l.e)(["monitorState","filter","appInfo","userInfo"])),methods:st({},Object(l.b)(["initStore","toggleRecordState","clearMonitorData","setFilter"]),{calcSize:function(){console.log("resize"),this.width=window.innerWidth,this.contentHeight=window.innerHeight-28}}),watch:{filterForm:{handler:p()((function(){this.setFilter(this.filterForm)}),1e3),deep:!0},filter:{handler:function(){this.filterForm=JSON.parse(JSON.stringify(this.filter))},deep:!0}},mounted:(dt=ct(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it()(1e3);case 2:this.filterForm=JSON.parse(JSON.stringify(this.filter));case 3:case"end":return e.stop()}}),e,this)}))),function(){return dt.apply(this,arguments)}),created:(lt=ct(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.initStore(),this.calcSize(),window.addEventListener("resize",p()((function(e){t.calcSize()}),200));case 3:case"end":return e.stop()}}),e,this)}))),function(){return lt.apply(this,arguments)})},ft=Object(g.a)(pt,u,[],!1,null,null,null);ft.options.__file="src/pages/monitor/App.vue";var vt=ft.exports,ht=function(e){return e.filteredRecordArray.length},mt=function(e){var t={};return e.bindedDeviceList.forEach((function(e){t[e.id]=e.name})),t},gt=function(e){return e.userInfo.deviceId},yt=function(e){return e.recordMap[e.selectRecordId]||{}},bt=function(e){return e.recordMap[e.rightClickedRecordId]},_t=function(e){return e.bindedDeviceList.find((function(t){return t.id==e.rightClickedDeviceId}))||{}},xt={getAppInfo:function(){return Q.a.get("/app/get-info")}};function Ct(e,t,r,n,i,o,c){try{var a=e[o](c),s=a.value}catch(e){return void r(e)}a.done?t(s):Promise.resolve(s).then(n,i)}function kt(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function c(e){Ct(o,n,i,c,a,"next",e)}function a(e){Ct(o,n,i,c,a,"throw",e)}c(void 0)}))}}function wt(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=kt(regeneratorRuntime.mark((function e(t){var r,n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,t.dispatch,e.next=3,Qe.a.getUserInfo();case 3:return n=e.sent,r("setUserInfo",n.data.data),e.next=7,xt.getAppInfo();case 7:if(i=e.sent,r("setAppInfo",i.data.data),window.io){e.next=11;break}return e.abrupt("return");case 11:(o=io("/httptrafic")).on("rows",(function(e){r("setTraffic",e)})),o.on("filter",(function(e){r("setLocalFilter",e)})),o.on("state",(function(e){r("setMonitorState",e)})),o.on("clear",(function(){r("clearLocalMonitorData")})),o.on("bindedDeviceList",(function(e){r("setBindedDeviceList",e)})),o.on("hostfilelist",(function(e){r("setHostFileList",e)}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e){return Rt.apply(this,arguments)}function Rt(){return(Rt=kt(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state,n=t.commit,t.dispatch,(i=r.monitorState).stopRecord=!i.stopRecord,n("setMonitorState",i),ee(i.stopRecord);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=kt(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state,i=t.commit,t.dispatch,i("setLocalFilter",r),ie(n.filter);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e,t){return It.apply(this,arguments)}function It(){return(It=kt(regeneratorRuntime.mark((function e(t,r){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,t.commit,t.dispatch,n.selectRecordId!=r){e.next=3;break}return e.abrupt("return");case 3:if(n.selectRecordId=r,n.currentRequestBody="",n.currentResponseBody="",i=n.recordMap[r],!/(json)|(x-www-form-urlencoded)/i.test(i.originRequest.headers["content-type"])){e.next=11;break}return e.next=10,G(r);case 10:n.currentRequestBody=e.sent;case 11:if(e.prev=11,!/(text)|(javascript)|(json)/i.test(i.response.headers["content-type"])){e.next=16;break}return e.next=15,X(r);case 15:n.currentResponseBody=e.sent;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),console.log("请求body数据失败",i,e.t0);case 21:case"end":return e.stop()}}),e,null,[[11,18]])})))).apply(this,arguments)}function qt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=kt(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state,r=t.commit,t.dispatch,r("clearLocalMonitorData"),re();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Et=r(12),Nt=r.n(Et);function Ft(e,t){e.userInfo=t}function Lt(e,t){e.appInfo=t}function Mt(e,t){e.bindedDeviceList=t}function $t(e,t){e.hostFileList=t}function Bt(e,t){e.rightClickedRecordId=t}function Tt(e,t){e.rightClickedDeviceId=t}function Ut(e,t){if(!e.monitorState.stopRecord&&!e.requestingClear){var r=e.filter,n=r.host,i=r.path;Nt()(t,(function(t){var r=t.id,o=!!e.recordMap[r],c=e.recordMap[r]||{};Object.assign(c,t),s.default.set(e.recordMap,r,c),o||e.originRecordArray.push(r);var a=t.originRequest;a&&a.host.indexOf(n)>-1&&a.path.indexOf(i)>-1&&e.filteredRecordArray.push(r)}))}}function At(e,t){var r=e.filter;if(r.path!=t.path||r.host!=t.host){e.filter=t;var n=[],i=e.filter,o=i.host,c=i.path;e.originRecordArray.forEach((function(t){var r=e.recordMap[t],i=r.originRequest;i&&i.host.indexOf(o)>-1&&i.path.indexOf(c)>-1&&n.push(r.id)})),e.filteredRecordArray=n}}function Vt(e,t){e.monitorState=t}function Qt(e){e.recordMap={},e.originRecordArray=[],e.filteredRecordArray=[],e.selectRecordId="",e.currentRequestBody="",e.currentResponseBody=""}s.default.use(l.a);var zt=new l.a.Store({state:{userInfo:{userId:"guest",deviceId:"",clientIp:""},appInfo:{},bindedDeviceList:[],hostFileList:[],recordMap:{},originRecordArray:[],filteredRecordArray:[],monitorState:{stopRecord:!1,overflow:!1},selectRecordId:"",rightClickedRecordId:"",rightClickedDeviceId:"",currentRequestBody:"",currentResponseBody:"",filter:{host:"",path:""}},getters:n,actions:i,mutations:o});r(356);s.default.use(a.a),new s.default({el:"#app",store:zt,render:function(e){return e(vt)}})},360:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"contextMenu",staticClass:"ctx-menu-container",style:this.ctxStyle,attrs:{id:this.id},on:{click:function(e){e.stopPropagation()},contextmenu:function(e){e.stopPropagation()}}},[t("div",{staticClass:"ctx open",staticStyle:{"background-color":"transparent"}},[t("ul",{staticClass:"ctx-menu",class:{"ctx-menu-right":"right"===this.align,"ctx-menu-left":"left"===this.align},attrs:{role:"menu"}},[this._t("default")],2)])])};n._withStripped=!0;var i=r(140),o=r.n(i),c={name:"context-menu",props:{id:{type:String,default:"default-ctx"},ctxOpen:{type:Function},ctxCancel:{type:Function},ctxClose:{type:Function}},data:function(){var e=this;return{locals:{},align:"left",ctxTop:0,ctxLeft:0,ctxVisible:!1,bodyClickListener:o()((function(t){if(!!e.ctxVisible&&!e.$el.contains(t.target)){if(1!==t.which)return t.preventDefault(),t.stopPropagation(),!1;e.ctxVisible=!1,e.ctxCancel&&e.ctxCancel(e.locals),t.stopPropagation()}else e.ctxVisible=!1,e.ctxClose&&e.ctxClose(e.locals)}))}},methods:{setPositionFromEvent:function(e){var t=e.pageX,r=e.pageY;this.ctxTop=r-document.body.scrollTop,this.ctxLeft=t},open:function(e,t){return this.ctxVisible=!0,this.ctxOpen&&this.ctxOpen(t),this.setPositionFromEvent(e),this.$el.setAttribute("tab-index",-1),this.bodyClickListener.start(),this}},watch:{ctxVisible:function(e,t){!0===t&&!1===e&&this.bodyClickListener.stop((function(e){}))}},computed:{ctxStyle:function(){return{display:this.ctxVisible?"block":"none",top:(this.ctxTop||0)+"px",left:(this.ctxLeft||0)+"px"}}}},a=(r(345),r(1)),s=Object(a.a)(c,n,[],!1,null,null,null);s.options.__file="src/components/context-menu/index.vue";t.default=s.exports},54:function(e,t,r){},57:function(e,t,r){var n=r(360);n.install=function(e){return e.component("context-menu",n)},window.VueContextMenu=n,e.exports=e.exports.default=n},8:function(e,t,r){"use strict";var n=r(0),i=r.n(n),o=r(30),c=r.n(o);t.a={getDataList:function(){return i.a.get("/data/getdatalist")},removeDataFile:function(e){return i.a.post("/data/removedatafile",e)},createDataFile:function(e){return i.a.post("/data/createdatafile",e)},getDataFile:function(e){return i.a.get("/data/getdatafile?id=".concat(e))},saveDataFile:function(e,t){var r=new FormData;return r.append("content",t),i.a.post("/data/savedatafile?id=".concat(e),r)},saveDataEntryFromTraffic:function(e,t,r){return i.a.post("/data/savedatafromtraffic",{id:c()(),name:t,contenttype:r,reqid:e})}}}});