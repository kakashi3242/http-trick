!function(t){function e(e){for(var n,a,c=e[0],o=e[1],l=e[2],d=0,v=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&v.push(r[a][0]),r[a]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(u&&u(e);v.length;)v.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,c=1;c<i.length;c++){var o=i[c];0!==r[o]&&(n=!1)}n&&(s.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},r={2:0},s=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;s.push([367,0]),i()}({149:function(t,e){t.exports=function(t){var e=!1;return{get isListening(){return e},start:function(t){window.addEventListener("click",i,!0),window.addEventListener("keyup",n,!0),e=!0,"function"==typeof t&&t()},stop:function(t){window.removeEventListener("click",i,!0),window.removeEventListener("keyup",n,!0),e=!1,"function"==typeof t&&t()}};function i(e){e.preventDefault(),"function"==typeof t&&t(e);try{stop()}catch(e){}}function n(t){27===t.keyCode&&i(t)}}},15:function(t,e,i){"use strict";var n=i(0),r=i.n(n),s=i(13),a=i.n(s);e.a={getDataList:function(){return r.a.get("/data/getdatalist")},saveDataList:function(t){return r.a.post("/data/savedatalist",t)},getDataFile:function(t){return r.a.get("/data/getdatafile?id=".concat(t))},saveDataFile:function(t,e){var i=new FormData;return i.append("content",e),r.a.post("/data/savedatafile?id=".concat(t),i)},saveDataEntryFromTraffic:function(t,e,i){return r.a.post("/data/savedatafromtraffic",{id:a()(),name:e,contenttype:i,reqid:t})}}},2:function(t,e,i){"use strict";var n=i(0),r=i.n(n);e.a={saveFile:function(t){return r.a.post("/profile/savefile",t)},disableRule:function(){return r.a.post("/profile/setRuleState")},enableRule:function(){return r.a.post("/profile/setRuleState?rulestate=1")},disableHost:function(){return r.a.post("/profile/setHostState")},enableHost:function(){return r.a.post("/profile/setHostState?hoststate=1")},disableFilter:function(){return r.a.post("/profile/setFilterState")},enableFilter:function(){return r.a.post("/profile/setFilterState?filterstate=1")},getUserId:function(){return r.a.get("/profile/getUserId")},getUserInfo:function(){return r.a.get("/profile/getUserInfo")},setUserId:function(t){return r.a.get("/profile/setUserId?userId=".concat(t))},unBind:function(t){return r.a.get("/profile/device/unbind?deviceId=".concat(t))},setDeviceName:function(t,e){return r.a.get("/profile/device/setName?deviceId=".concat(t,"&name=").concat(encodeURI(e)))},disableMonitor:function(t){return r.a.get("/profile/device/disableMonitor?deviceId=".concat(t))},deviceUseHost:function(t,e){return r.a.get("/profile/device/usehost?deviceId=".concat(t,"&hostname=").concat(encodeURI(e)))},enableMonitor:function(t){return r.a.get("/profile/device/enableMonitor?deviceId=".concat(t))},setExternalProxy:function(t,e){return e.deviceId=t,r.a.post("/profile/device/externalProxy",e)}}},354:function(t,e,i){"use strict";var n=i(63);i.n(n).a},355:function(t,e,i){},356:function(t,e,i){},357:function(t,e,i){},358:function(t,e,i){},359:function(t,e,i){},360:function(t,e,i){},361:function(t,e,i){},362:function(t,e,i){},365:function(t,e,i){},367:function(t,e,i){"use strict";i.r(e);i(67);var n=i(64),r=i.n(n),s=(i(117),i(3)),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app",attrs:{id:"app"}},[i("div",{staticClass:"op-bar"},[i("span",{staticClass:"icon-btn",class:{overflow:t.state.overflow},on:{click:t.requestToggleRecordState}},[t.state.stopRecord?i("i",{staticClass:"iconfont icon-bofang bofang"}):i("i",{staticClass:"iconfont icon-zanting zanting"})]),t._v(" "),i("i",{staticClass:"iconfont icon-qingchu icon-btn",on:{click:t.requestClear}}),t._v(" "),i("span",{staticClass:"tips ",style:{visibility:t.state.overflow?"initial":"hidden"}},[t._v("记录已满，请清除历史记录")]),t._v(" "),i("span",{staticClass:"filters"},[t._v("\n            Filter: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.host,expression:"filter.host"}],attrs:{placeholder:"Host"},domProps:{value:t.filter.host},on:{input:function(e){e.target.composing||t.$set(t.filter,"host",e.target.value)}}}),t._v(" / "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.path,expression:"filter.path"}],attrs:{placeholder:"Path"},domProps:{value:t.filter.path},on:{input:function(e){e.target.composing||t.$set(t.filter,"path",e.target.value)}}}),t._v(" "),i("i",{staticClass:"iconfont icon-sousuo search"})]),t._v(" "),i("div",{staticClass:"placeholder"}),t._v(" "),i("a",{staticClass:"goto-manager",attrs:{href:"/manager.html",target:"_blank"}},[i("el-button",{attrs:{type:"text"}},[t._v("管理")])],1),t._v(" "),t.$dc.appInfo.single?t._e():i("a",{staticClass:"username",attrs:{href:"javascript:void(0)"},on:{click:t.changeUser}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击切换用户",placement:"top"}},[i("el-button",{attrs:{type:"text"}},[t._v(t._s(t.$dc.userInfo.userId))])],1)],1)]),t._v(" "),i("div",{staticClass:"monitor",style:{height:t.contentHeight+"px"}},[i("device-list"),t._v(" "),i("http-traffic",{attrs:{height:t.contentHeight}}),t._v(" "),i("detail")],1)])};a._withStripped=!0;var c=i(9),o=i.n(c),l=i(12),u=i.n(l),d=i(29),v=i.n(d),p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"traffic"},[t._m(0),t._v(" "),i("list",{attrs:{total:t.$dc.total,height:t.height-28,rowHeight:24},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.ids,(function(e){return i("record",{key:e,attrs:{index:e,id:t.$dc.filterdRecordArray[e]},on:{"right-clicked":t.rightClicked}})}))}}])}),t._v(" "),i("context-menu",{ref:"ctx",attrs:{id:"testingctx",ctxOpen:t.onCtxOpen,ctxCancel:t.resetCtxLocals,ctxClose:t.onCtxClose}},[i("li",{staticClass:"ctx-item",on:{click:t.saveData}},[t._v("保存为mock数据")]),t._v(" "),i("li",{staticClass:"ctx-item",on:{click:t.copyUrl}},[t._v("复制url")])])],1)};p._withStripped=!0;var f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",style:{"overflow-y":"auto",height:t.height+"px"},on:{scroll:function(e){return e.preventDefault(),t.handleScroll(e)}}},[i("div",{style:{height:t.contentHeight+"px"}},[i("div",{style:{transform:"translate3d(0,"+t.top+"px,0)"}},[t._t("default",null,{ids:t.ids})],2)])])};f._withStripped=!0;var h=i(148),m={props:{total:{type:Number,required:!0},height:{type:Number,required:!0},rowHeight:{type:Number,required:!0}},data:function(){return{scrollTop:0,start:0}},computed:{ids:function(){for(var t=[],e=this.start;e<this.end;e++)t.push(e);return t},contentHeight:function(){return this.rowHeight*this.total},keeps:function(){return Math.ceil(this.height/this.rowHeight)+2},end:function(){var t=this.start+20+this.keeps-1;return(t+=20)>this.total?this.total:t},top:function(){return this.rowHeight*this.start}},methods:{handleScroll:i.n(h)()((function(){var t=this.$refs.container.scrollTop,e=Math.floor(t/this.rowHeight);this.start=e<20?0:e-20}),100)}},_=i(1),g=Object(_.a)(m,f,[],!1,null,null,null);g.options.__file="src/monitor/components/traffic/List.vue";var x=g.exports,y=i(14),C=i.n(y),k=i(66),b=i.n(k),w=i(15),R=(i(355),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"record row",class:{selected:t.$dc.selectId==t.id,"right-clicked":t.$dc.rightClickId==t.id},on:{click:function(e){return t.clickRow(t.id)},contextmenu:function(e){return e.preventDefault(),t.rightClicked(e,t.id)}}},[i("div",{staticClass:"cell cell-index"},[t._v(t._s(t.index+1))]),t._v(" "),i("div",{staticClass:"cell cell-status"},[t._v(t._s(t.status))]),t._v(" "),i("div",{staticClass:"cell cell-method"},[t._v(t._s(t.method))]),t._v(" "),i("div",{staticClass:"cell cell-protocol"},[t._v(t._s(t.protocol))]),t._v(" "),i("div",{staticClass:"cell cell-host"},[t._v(t._s(t.host))]),t._v(" "),i("div",{staticClass:"cell cell-path"},[t._v(t._s(t.pathname))]),t._v(" "),i("div",{staticClass:"cell cell-type"},[t._v(t._s(t.type))]),t._v(" "),i("div",{staticClass:"cell cell-device"},[t._v(t._s(t.device))]),t._v(" "),i("div",{staticClass:"cell cell-time"},[t._v(t._s(t.duration))])])});R._withStripped=!0;var $={props:["index","id"],computed:{row:function(){return this.$dc.recordMap[this.id]},status:function(){try{return this.row.response.statusCode}catch(t){return""}},method:function(){return this.row.originRequest.method},protocol:function(){return this.row.originRequest.protocol},host:function(){return this.row.originRequest.host},pathname:function(){return this.row.originRequest.pathname},type:function(){try{return this.row.originRequest.headers["content-type"]}catch(t){return""}},device:function(){try{var t=this.row.originRequest.deviceId;return this.$dc.deviceIdNameMap[t]}catch(t){return""}},duration:function(){try{return this.row.response.remoteResponseEndTime-this.row.response.remoteRequestBeginTime}catch(t){return""}}},methods:{clickRow:function(t){this.$dc.setCurrentRowIndex(t)},rightClicked:function(t,e){this.$emit("right-clicked",t,e)}}},P=Object(_.a)($,R,[],!1,null,null,null);P.options.__file="src/monitor/components/traffic/record.vue";var I=P.exports,q={props:["height"],components:{List:x,ContextMenu:b.a,Record:I},data:function(){return{}},methods:{saveData:function(){var t=this;this.$dc.rightClickRow.response?this.$prompt("请输入数据文件名","保存为数据文件",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var i=e.value;w.a.saveDataEntryFromTraffic(t.$dc.rightClickId,i,t.$dc.rightClickRow.response.headers["content-type"].split(";")[0]).then((function(e){var i=e.data;0==i.code?t.$message({showClose:!0,type:"success",message:"保存成功!"}):t.$message.error("出错了，".concat(i.msg))}))})):this.$message({showClose:!0,message:"服务器还没有响应",type:"warning"})},copyUrl:function(){var t=this.$dc.rightClickRow.originRequest;C()("".concat(t.protocol,"//").concat(t.host,":").concat(t.port).concat(t.path)),this.$message("已将url复制到剪切板")},onCtxOpen:function(t){this.$dc.setRightClickedRecordId(t)},rightClicked:function(t,e){this.$refs.ctx.open(t,e)},onCtxClose:function(t){},resetCtxLocals:function(){this.$dc.setRightClickedRecordId("")}}},D=Object(_.a)(q,p,[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header row"},[i("div",{staticClass:"cell cell-index"},[t._v("#")]),t._v(" "),i("div",{staticClass:"cell cell-status"},[t._v("Status")]),t._v(" "),i("div",{staticClass:"cell cell-method"},[t._v("Method")]),t._v(" "),i("div",{staticClass:"cell cell-protocol"},[t._v("Protocol")]),t._v(" "),i("div",{staticClass:"cell cell-host"},[t._v("Host")]),t._v(" "),i("div",{staticClass:"cell cell-path"},[t._v("Path")]),t._v(" "),i("div",{staticClass:"cell cell-type"},[t._v("Type")]),t._v(" "),i("div",{staticClass:"cell cell-device"},[t._v("Device")]),t._v(" "),i("div",{staticClass:"cell cell-time"},[t._v("Time")])])}],!1,null,null,null);D.options.__file="src/monitor/components/traffic/HttpTraffic.vue";var S=D.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail",style:{height:t.height+"px"}},[i("div",{staticClass:"detail__header"},[i("div",{staticClass:"detail__tab",class:{active:"Origin"==t.activeName},on:{click:function(e){return t.tabClick("Origin")}}},[t._v("原始请求")]),t._v(" "),i("div",{staticClass:"detail__tab",class:{active:"Request"==t.activeName},on:{click:function(e){return t.tabClick("Request")}}},[t._v("Request")]),t._v(" "),i("div",{staticClass:"detail__tab",class:{active:"Response"==t.activeName},on:{click:function(e){return t.tabClick("Response")}}},[t._v("Response")]),t._v(" "),i("div",{staticClass:"detail__tab",class:{active:"Timeline"==t.activeName},on:{click:function(e){return t.tabClick("Timeline")}}},[t._v("Timeline")])]),t._v(" "),i("div",{staticClass:"detail__body"},["Origin"==t.activeName?i("div",[i("origin")],1):t._e(),t._v(" "),"Request"==t.activeName?i("div",[i("request-detail")],1):t._e(),t._v(" "),"Response"==t.activeName?i("div",[i("response-detail")],1):t._e(),t._v(" "),"Timeline"==t.activeName?i("div",[i("timeline")],1):t._e()])])};H._withStripped=!0;var N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"request"},[i("div",{staticClass:"request__header"},[i("div",{staticClass:"request__tab",class:{active:"Header"==t.activeName},on:{click:function(e){return t.tabClick("Header")}}},[t._v("Header")]),t._v(" "),i("div",{staticClass:"request__tab",class:{active:"Cookie"==t.activeName},on:{click:function(e){return t.tabClick("Cookie")}}},[t._v("Cookie")]),t._v(" "),i("div",{staticClass:"request__tab",class:{active:"Query Params"==t.activeName},on:{click:function(e){return t.tabClick("Query Params")}}},[t._v("Query Params")]),t._v(" "),i("div",{staticClass:"request__tab",class:{active:"Body"==t.activeName},on:{click:function(e){return t.tabClick("Body")}}},[t._v("Body")])]),t._v(" "),i("div",{staticClass:"request__body"},["Header"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.requestHeader}})],1):t._e(),t._v(" "),"Cookie"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.requestCookie}})],1):t._e(),t._v(" "),"Query Params"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.requestQueryParams}})],1):t._e(),t._v(" "),"Body"==t.activeName?i("div",{staticClass:"text-area"},[t._v(t._s(t.$dc.currentRequestBody))]):t._e()])])};N._withStripped=!0;var O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"keyvalue-wrapper"},[t._l(t.data,(function(e,n){return[i("div",{staticClass:"row"},[i("div",{staticClass:"name"},[t._v(t._s(n))]),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(e))])])]}))],2)};O._withStripped=!0;i(356);var E={props:["data"]},T=Object(_.a)(E,O,[],!1,null,null,null);T.options.__file="src/monitor/components/detail/KeyValueList.vue";var U=T.exports,L=(i(357),{components:{KeyValueList:U},data:function(){return{activeName:"Header"}},methods:{tabClick:function(t){this.activeName=t}}}),M=Object(_.a)(L,N,[],!1,null,null,null);M.options.__file="src/monitor/components/detail/RequestDetail.vue";var B=M.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"response"},[i("div",{staticClass:"response__header"},[i("div",{staticClass:"response__tab",class:{active:"Header"==t.activeName},on:{click:function(e){return t.tabClick("Header")}}},[t._v("Header")]),t._v(" "),i("div",{staticClass:"response__tab",class:{active:"Set Cookies"==t.activeName},on:{click:function(e){return t.tabClick("Set Cookies")}}},[t._v("Set Cookies")]),t._v(" "),i("div",{staticClass:"response__tab",class:{active:"Body"==t.activeName},on:{click:function(e){return t.tabClick("Body")}}},[t._v("Body")])]),t._v(" "),i("div",{staticClass:"response__body"},["Header"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.responseHeader}})],1):t._e(),t._v(" "),"Set Cookies"==t.activeName?i("div",{staticClass:"set-cookies"},t._l(t.$dc.setCookies,(function(e){return i("div",{staticClass:"cookie-row"},[t._v("\n                "+t._s(e)+"\n            ")])})),0):t._e(),t._v(" "),"Body"==t.activeName?i("div",{staticClass:"text-area"},[t._v(t._s(t.$dc.currentResponseBody))]):t._e()])])};F._withStripped=!0;i(358);var j={components:{KeyValueList:U},data:function(){return{activeName:"Header"}},methods:{tabClick:function(t){this.activeName=t}}},A=Object(_.a)(j,F,[],!1,null,null,null);A.options.__file="src/monitor/components/detail/ResponseDetail.vue";var V=A.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"origin"},[i("div",{staticClass:"request__header"},[i("div",{staticClass:"request__tab",class:{active:"Header"==t.activeName},on:{click:function(e){return t.tabClick("Header")}}},[t._v("Header")]),t._v(" "),i("div",{staticClass:"request__tab",class:{active:"Cookie"==t.activeName},on:{click:function(e){return t.tabClick("Cookie")}}},[t._v("Cookie")]),t._v(" "),i("div",{staticClass:"request__tab",class:{active:"Query Params"==t.activeName},on:{click:function(e){return t.tabClick("Query Params")}}},[t._v("Query Params")])]),t._v(" "),i("div",{staticClass:"request__body"},["Header"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.originRequestHeader}})],1):t._e(),t._v(" "),"Cookie"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.originRequestCookie}})],1):t._e(),t._v(" "),"Query Params"==t.activeName?i("div",[i("key-value-list",{attrs:{data:t.$dc.originRequestQueryParams}})],1):t._e()])])};Q._withStripped=!0;i(359);var z={components:{KeyValueList:U},data:function(){return{activeName:"Header"}},methods:{tabClick:function(t){this.activeName=t}}},K=Object(_.a)(z,Q,[],!1,null,null,null);K.options.__file="src/monitor/components/detail/Origin.vue";var J=K.exports,X=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("key-value-list",{attrs:{data:this.$dc.timeline}})],1)};X._withStripped=!0;var Y={components:{KeyValueList:U}},G=Object(_.a)(Y,X,[],!1,null,null,null);G.options.__file="src/monitor/components/detail/Timeline.vue";var W=G.exports,Z=(i(360),{props:["height"],components:{RequestDetail:B,ResponseDetail:V,Origin:J,Timeline:W},data:function(){return{activeName:"Origin"}},methods:{tabClick:function(t){this.activeName=t}}}),tt=Object(_.a)(Z,H,[],!1,null,null,null);tt.options.__file="src/monitor/components/detail/Detail.vue";var et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"device-list"},[i("div",{staticClass:"title"},[t._v("绑定的设备")]),t._v(" "),i("div",{staticClass:"list-wrapper"},t._l(t.$dc.bindedDeviceList,(function(e,n){return i("device",{key:n,attrs:{device:e},on:{"right-clicked":t.rightClicked}})})),1),t._v(" "),i("div",{staticClass:"qr-code-wrapper"},[i("div",{staticClass:"qr-code"},[i("div",{staticClass:"title"},[t._v("扫码绑定设备")]),t._v(" "),i("div",{staticClass:"qrcode"},[i("img",{staticClass:"bind-qrcode",attrs:{src:t.imgUrl}})]),t._v(" "),i("div",{staticClass:"bottom"},[i("el-button",{attrs:{type:"text"},on:{click:t.copyBindUrl}},[t._v("点击复制绑定链接")])],1)])]),t._v(" "),i("context-menu",{ref:"ctx",attrs:{id:"testingctx",ctxOpen:t.onCtxOpen,ctxCancel:t.resetCtxLocals,ctxClose:t.onCtxClose}},[i("li",{staticClass:"ctx-item",on:{click:t.renameDevice}},[t._v("取别名")]),t._v(" "),i("li",{staticClass:"ctx-item",on:{click:t.changeHost}},[t._v("修改host")]),t._v(" "),i("li",{staticClass:"ctx-item",on:{click:t.configExternalProxy}},[t._v("设置外部代理")]),t._v(" "),i("li",{staticClass:"ctx-item",on:{click:t.removeDevice}},[t._v("删除设备")]),t._v(" "),t.$dc.rightClickDevice.disableMonitor?t._e():i("li",{staticClass:"ctx-item",on:{click:t.disableMonitor}},[t._v("停止监控")]),t._v(" "),t.$dc.rightClickDevice.disableMonitor?i("li",{staticClass:"ctx-item",on:{click:t.enableMonitor}},[t._v("开启监控")]):t._e()]),t._v(" "),i("el-dialog",{attrs:{title:t.chooseHostTitle,visible:t.showChoseHostFile,width:"30%",center:""},on:{"update:visible":function(e){t.showChoseHostFile=e}}},[i("div",{staticClass:"hostfile-list"},[i("div",{on:{click:function(e){return t.useHost("")}}},[i("el-tag",{class:{"used-host":!t.$dc.rightClickDevice.hostFileName}},[t._v("\n                    用户默认\n                ")])],1),t._v(" "),t._l(t.$dc.hostFileList,(function(e,n){return i("div",{key:e.name,on:{click:function(i){return t.useHost(e.name)}}},[i("el-tag",{class:{"used-host":e.name==t.$dc.rightClickDevice.hostFileName}},[t._v("\n                    "+t._s(e.name)+"\n                ")])],1)})),t._v(" "),i("div",{staticClass:"fake-tag"}),t._v(" "),i("div",{staticClass:"fake-tag"}),t._v(" "),i("div",{staticClass:"fake-tag"})],2)]),t._v(" "),i("el-dialog",{attrs:{title:t.setExternalProxyTitle,visible:t.showSetExternalProxy,width:"30%",center:""},on:{"update:visible":function(e){t.showSetExternalProxy=e}}},[i("div",{staticClass:"gateway"},[i("el-form",{attrs:{"label-width":"100px",model:t.currentProxy}},[i("el-form-item",{attrs:{label:"使用用户设置"}},[i("el-checkbox",{model:{value:t.currentProxy.canUseUserSetting,callback:function(e){t.$set(t.currentProxy,"canUseUserSetting",e)},expression:"currentProxy.canUseUserSetting"}},[t._v("允许")])],1),t._v(" "),i("el-form-item",{attrs:{label:"代理"}},[i("el-checkbox",{model:{value:t.currentProxy.enable,callback:function(e){t.$set(t.currentProxy,"enable",e)},expression:"currentProxy.enable"}},[t._v("开启")])],1),t._v(" "),i("el-form-item",{attrs:{label:"代理类型"}},[i("el-radio-group",{model:{value:t.currentProxy.type,callback:function(e){t.$set(t.currentProxy,"type",e)},expression:"currentProxy.type"}},[i("el-radio",{attrs:{label:"socks5"}},[t._v("Socks5代理")]),t._v(" "),i("el-radio",{attrs:{label:"http"}},[t._v("Http代理")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"IP"}},[i("el-input",{model:{value:t.currentProxy.ip,callback:function(e){t.$set(t.currentProxy,"ip",e)},expression:"currentProxy.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"端口"}},[i("el-input",{model:{value:t.currentProxy.port,callback:function(e){t.$set(t.currentProxy,"port",e)},expression:"currentProxy.port"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitExternalProxy}},[t._v("提交")]),t._v(" "),i("el-button",{on:{click:t.resetExternalProxy}},[t._v("重置")])],1)],1)],1)])],1)};it._withStripped=!0;i(361);var nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"device",on:{contextmenu:function(e){return e.preventDefault(),t.rightClicked(e,t.device.id)}}},[i("div",{key:"name",staticClass:"name"},[t._v("Name: "+t._s(t.device.name)),t.$dc.currentDeviceId==t.device.id?i("span",{staticStyle:{color:"#eab700"}},[t._v("(本机)")]):t._e()]),t._v(" "),t.device.hostFileName?i("div",{key:"host",staticClass:"host"},[t._v("HOST: "+t._s(t.device.hostFileName))]):t._e(),t._v(" "),i("div",{key:"id",staticClass:"id"},[t._v("ID: "+t._s(t.device.id))]),t._v(" "),t.device.disableMonitor?i("div",{staticClass:"status offline"}):t._e(),t._v(" "),t.device.disableMonitor?t._e():i("div",{staticClass:"status online"}),t._v(" "),t.proxy?i("div",{staticClass:"id"},[t._v("代理:"+t._s(t.proxy))]):t._e()])};nt._withStripped=!0;i(362);var rt={name:"Device",props:["device"],computed:{proxy:function(){var t=this.device,e=t.externalProxy,i=t.externalSocks5Proxy?"socks5":"http",n="",r="",s=t.externalProxyCanUseUserSetting;return t.externalSocks5Proxy?(n=t.socks5Ip,r=t.socks5Port):(n=t.httpIp,r=t.httpPort),!(!e&&!s)&&(e?"".concat(i,"://").concat(n,":").concat(r):"使用用户设置")}},methods:{requestRemoveDevice:function(){},requestSetName:function(){},setName:function(t,e){},rightClicked:function(t,e){this.$emit("right-clicked",t,e)}}},st=Object(_.a)(rt,nt,[],!1,null,null,null);st.options.__file="src/monitor/components/device/Device.vue";var at,ct=st.exports,ot=i(31),lt=i.n(ot),ut=i(2);function dt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vt(t,e,i,n,r,s,a){try{var c=t[s](a),o=c.value}catch(t){return void i(t)}c.done?e(o):Promise.resolve(o).then(n,r)}function pt(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var s=t.apply(e,i);function a(t){vt(s,n,r,a,c,"next",t)}function c(t){vt(s,n,r,a,c,"throw",t)}a(void 0)}))}}var ft,ht,mt,_t={name:"DeviceList",components:{Device:ct,ContextMenu:b.a},data:function(){return{showChoseHostFile:!1,showSetExternalProxy:!1,currentProxy:{canUseUserSetting:!1,enable:!1,type:"http",ip:"",port:""}}},computed:{bindUrl:function(){return"http://".concat(this.$dc.appInfo.pcIp,":").concat(this.$dc.appInfo.webUiPort,"/profile/device/bind?userId=").concat(this.$dc.userInfo.userId)},imgUrl:function(){return lt.a.toDataURL(this.bindUrl,4)},chooseHostTitle:function(){return"选择".concat(this.$dc.rightClickDevice.name,"使用的Host文件")},setExternalProxyTitle:function(){return"设置".concat(this.$dc.rightClickDevice.name,"的外部代理")}},methods:(at={copyBindUrl:function(){C()(this.bindUrl),this.$message("已将设备绑定链接复制到剪切板，在设备中打开此url即可绑定设备")},changeHost:function(){this.showChoseHostFile=!0},useHost:(mt=pt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.showChoseHostFile=!1,i=e==this.$dc.rightClickDevice.hostFileName?"":e,t.next=4,ut.a.deviceUseHost(this.$dc.rightClickDeviceId,i);case 4:this.$message({type:"success",message:i?"设置Host成功":"取消Host成功"});case 5:case"end":return t.stop()}}),t,this)}))),function(t){return mt.apply(this,arguments)}),removeDevice:(ht=pt(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut.a.unBind(e.id);case 2:this.$message("解绑成功");case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return ht.apply(this,arguments)}),renameDevice:function(){var t=this;this.$prompt("请输入设备名字","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e=pt(regeneratorRuntime.mark((function e(i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,e.next=3,ut.a.setDeviceName(t.$dc.rightClickDeviceId,n);case 3:t.$message({type:"success",message:"设备命名成功"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))}},dt(at,"removeDevice",(function(){var t=this;this.$confirm("此操作将永久删除该设备, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(pt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.a.unBind(t.$dc.rightClickDeviceId);case 2:t.$message({type:"success",message:"删除成功!"});case 3:case"end":return e.stop()}}),e)})))).catch((function(){}))})),dt(at,"disableMonitor",(function(){ut.a.disableMonitor(this.$dc.rightClickDeviceId)})),dt(at,"enableMonitor",(function(){ut.a.enableMonitor(this.$dc.rightClickDeviceId)})),dt(at,"configExternalProxy",(function(){this.resetExternalProxy(),this.showSetExternalProxy=!0})),dt(at,"resetExternalProxy",(function(){var t=this.$dc.rightClickDevice,e=t.externalProxyCanUseUserSetting,i=!1,n="socks5",r="",s="";t&&(i=t.externalProxy,n=t.externalSocks5Proxy?"socks5":"http",t.externalSocks5Proxy?(r=t.socks5Ip,s=t.socks5Port):(r=t.httpIp,s=t.httpPort)),this.currentProxy={canUseUserSetting:e,enable:i,type:n,ip:r,port:s}})),dt(at,"submitExternalProxy",(ft=pt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ut.a.setExternalProxy(this.$dc.rightClickDeviceId,this.currentProxy),this.showSetExternalProxy=!1,this.$message("解绑成功");case 3:case"end":return t.stop()}}),t,this)}))),function(){return ft.apply(this,arguments)})),dt(at,"onCtxOpen",(function(t){this.$dc.setRightClickedDeviceId(t)})),dt(at,"rightClicked",(function(t,e){this.$refs.ctx.open(t,e)})),dt(at,"onCtxClose",(function(t){})),dt(at,"resetCtxLocals",(function(){this.$dc.setRightClickedDeviceId("")})),at)},gt=Object(_.a)(_t,it,[],!1,null,null,null);gt.options.__file="src/monitor/components/device/DeviceList.vue";var xt=gt.exports,yt=i(0),Ct=i.n(yt),kt=i(150),bt=i.n(kt);function wt(t,e,i,n,r,s,a){try{var c=t[s](a),o=c.value}catch(t){return void i(t)}c.done?e(o):Promise.resolve(o).then(n,r)}function Rt(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var s=t.apply(e,i);function a(t){wt(s,n,r,a,c,"next",t)}function c(t){wt(s,n,r,a,c,"throw",t)}a(void 0)}))}}function $t(t){return Pt.apply(this,arguments)}function Pt(){return(Pt=Rt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.a.get("/traffic/getResponseBody?id=".concat(e));case 3:return i=t.sent,t.abrupt("return",i.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function It(t){return qt.apply(this,arguments)}function qt(){return(qt=Rt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.a.get("/traffic/getRequestBody?id=".concat(e));case 3:return i=t.sent,t.abrupt("return",i.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Dt(){return(Dt=Rt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.a.get("/traffic/stopRecord?stop=".concat(e));case 3:return i=t.sent,t.abrupt("return",i.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function St(){return(St=Rt(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.a.get("/traffic/clear");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function Ht(){return(Ht=Rt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ct.a.get("/traffic/setfilter?path=".concat(e.path,"&host=").concat(e.host));case 3:return i=t.sent,t.abrupt("return",i.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return","");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var Nt=/; */,Ot=decodeURIComponent;function Et(t,e){try{return e(t)}catch(e){return t}}function Tt(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var i={},n=e||{},r=t.split(Nt),s=n.decode||Ot,a=0;a<r.length;a++){var c=r[a],o=c.indexOf("=");if(!(o<0)){var l=c.substr(0,o).trim(),u=c.substr(++o,c.length).trim();'"'==u[0]&&(u=u.slice(1,-1)),null==i[l]&&(i[l]=Et(u,s))}}return i}function Ut(t){return!t||t.indexOf("?")<0?{}:bt.a.parse(t.split("?")[1])}var Lt={getAppInfo:function(){return Ct.a.get("/app/get-info")}};function Mt(t,e,i,n,r,s,a){try{var c=t[s](a),o=c.value}catch(t){return void i(t)}c.done?e(o):Promise.resolve(o).then(n,r)}function Bt(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var s=t.apply(e,i);function a(t){Mt(s,n,r,a,c,"next",t)}function c(t){Mt(s,n,r,a,c,"throw",t)}a(void 0)}))}}var Ft,jt,At={components:{HttpTraffic:S,Detail:et,DeviceList:xt},data:function(){return{isDataCenter:!0,appInfo:{},userInfo:{userId:"guest",deviceId:"",clientIp:""},bindedDeviceList:[],hostFileList:[],width:0,contentHeight:0,recordMap:{},originRecordArray:[],filterdRecordArray:[],selectId:"",rightClickId:"",rightClickDeviceId:"",currentRequestBody:"",currentResponseBody:"",requestingClear:!1,state:{stopRecord:!1,overflow:!1},filter:{host:"",path:""}}},computed:{total:function(){return this.filterdRecordArray.length},deviceIdNameMap:function(){var t={};return this.bindedDeviceList.forEach((function(e){t[e.id]=e.name})),t},currentDeviceId:function(){return this.userInfo.deviceId},currentRow:function(){return this.recordMap[this.selectId]||{}},rightClickRow:function(){return this.recordMap[this.rightClickId]},rightClickDevice:function(){var t=this;return this.bindedDeviceList.find((function(e){return e.id==t.rightClickDeviceId}))||{}},originRequestHeader:function(){try{return this.currentRow.originRequest.headers}catch(t){return{}}},originRequestCookie:function(){try{return Tt(this.currentRow.originRequest.headers.cookie||"")}catch(t){return{}}},originRequestQueryParams:function(){try{return Ut(this.currentRow.originRequest.path)}catch(t){return{}}},requestHeader:function(){try{return this.currentRow.requestData.headers}catch(t){return{}}},requestCookie:function(){try{return Tt(this.currentRow.requestData.headers.cookie||"")}catch(t){return{}}},requestQueryParams:function(){try{return Ut(this.currentRow.requestData.path)}catch(t){return{}}},responseHeader:function(){try{var t=Object.assign({},this.currentRow.response.headers);return delete t["set-cookie"],t}catch(t){return{}}},setCookies:function(){try{return this.currentRow.response.headers["set-cookie"]||[]}catch(t){return[]}},timeline:function(){return{"请求":""}}},methods:{changeUser:function(){var t=this;this.$prompt("请输入用户名(不输入内容将会使用本机ip作为用户名)","切换用户",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var e=Bt(regeneratorRuntime.mark((function e(i){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,e.next=3,ut.a.setUserId(n||"");case 3:r=e.sent,t.userId=r.data.data.userId,location.reload();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))},requestToggleRecordState:function(){this.state.stopRecord=!this.state.stopRecord,function(t){Dt.apply(this,arguments)}(this.state.stopRecord)},requestClear:function(){this.requestingClear=!0,this.clear(),function(){St.apply(this,arguments)}()},filterRecords:function(){var t=this,e=[],i=this.filter,n=i.host,r=i.path;this.originRecordArray.forEach((function(i){var s=t.recordMap[i],a=s.originRequest;a&&a.host.indexOf(n)>-1&&a.path.indexOf(r)>-1&&e.push(s.id)})),this.filterdRecordArray=e},calcSize:function(){this.width=o()(window).width(),this.contentHeight=o()(window).height()-28},receiveTraffic:function(t){var e=this;if(!this.state.stopRecord&&!this.requestingClear){var i=this.filter,n=i.host,r=i.path;v()(t,(function(t){var i=t.id,s=!!e.recordMap[i],a=e.recordMap[i]||{};Object.assign(a,t),e.$set(e.recordMap,i,a),s||e.originRecordArray.push(i);var c=t.originRequest;c&&c.host.indexOf(n)>-1&&c.path.indexOf(r)>-1&&e.filterdRecordArray.push(i)}))}},setCurrentRowIndex:(jt=Bt(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.selectId!=e){t.next=2;break}return t.abrupt("return");case 2:if(this.selectId=e,this.currentRequestBody="",this.currentResponseBody="",i=this.recordMap[e],!/(json)|(x-www-form-urlencoded)/i.test(i.originRequest.headers["content-type"])){t.next=10;break}return t.next=9,It(e);case 9:this.currentRequestBody=t.sent;case 10:if(t.prev=10,!/(text)|(javascript)|(json)/i.test(i.response.headers["content-type"])){t.next=15;break}return t.next=14,$t(e);case 14:this.currentResponseBody=t.sent;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:case"end":return t.stop()}}),t,this,[[10,17]])}))),function(t){return jt.apply(this,arguments)}),setRightClickedRecordId:function(t){this.rightClickId=t},setRightClickedDeviceId:function(t){this.rightClickDeviceId=t},setFilter:function(t){var e=this.filter;e.path==t.path&&e.host==t.host||(this.filter=t)},setState:function(t){this.state=t},clear:function(){this.recordMap={},this.originRecordArray=[],this.filterdRecordArray=[],this.currentRequestBody="",this.currentResponseBody=""}},watch:{filter:{handler:u()((function(){this.filterRecords(),function(t){Ht.apply(this,arguments)}(this.filter)}),1e3),deep:!0}},created:(Ft=Bt(regeneratorRuntime.mark((function t(){var e,i,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.calcSize(),t.next=3,ut.a.getUserInfo();case 3:return e=t.sent,this.userInfo=e.data.data,t.next=7,Lt.getAppInfo();case 7:if(i=t.sent,this.appInfo=i.data.data,o()(window).resize(u()(this.calcSize,200)),window.io){t.next=12;break}return t.abrupt("return");case 12:(n=io("/httptrafic")).on("rows",this.receiveTraffic),n.on("filter",(function(t){r.setFilter(t)})),n.on("state",this.setState),n.on("clear",(function(){r.requestingClear=!1,r.clear()})),n.on("bindedDeviceList",(function(t){r.bindedDeviceList=t})),n.on("hostfilelist",(function(t){r.hostFileList=t}));case 19:case"end":return t.stop()}}),t,this)}))),function(){return Ft.apply(this,arguments)})},Vt=Object(_.a)(At,a,[],!1,null,null,null);Vt.options.__file="src/monitor/App.vue";var Qt=Vt.exports,zt=i(65),Kt=i.n(zt);i(365);s.default.use(r.a),s.default.use(Kt.a),new s.default({el:"#app",render:function(t){return t(Qt)}})},369:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"contextMenu",staticClass:"ctx-menu-container",style:this.ctxStyle,attrs:{id:this.id},on:{click:function(t){t.stopPropagation()},contextmenu:function(t){t.stopPropagation()}}},[e("div",{staticClass:"ctx open",staticStyle:{"background-color":"transparent"}},[e("ul",{staticClass:"ctx-menu",class:{"ctx-menu-right":"right"===this.align,"ctx-menu-left":"left"===this.align},attrs:{role:"menu"}},[this._t("default")],2)])])};n._withStripped=!0;var r=i(149),s=i.n(r),a={name:"context-menu",props:{id:{type:String,default:"default-ctx"},ctxOpen:{type:Function},ctxCancel:{type:Function},ctxClose:{type:Function}},data:function(){var t=this;return{locals:{},align:"left",ctxTop:0,ctxLeft:0,ctxVisible:!1,bodyClickListener:s()((function(e){if(!!t.ctxVisible&&!t.$el.contains(e.target)){if(1!==e.which)return e.preventDefault(),e.stopPropagation(),!1;t.ctxVisible=!1,t.ctxCancel&&t.ctxCancel(t.locals),e.stopPropagation()}else t.ctxVisible=!1,t.ctxClose&&t.ctxClose(t.locals)}))}},methods:{setPositionFromEvent:function(t){var e=t.pageX,i=t.pageY;this.ctxTop=i-document.body.scrollTop,this.ctxLeft=e},open:function(t,e){return this.ctxVisible=!0,this.ctxOpen&&this.ctxOpen(e),this.setPositionFromEvent(t),this.$el.setAttribute("tab-index",-1),this.bodyClickListener.start(),this}},watch:{ctxVisible:function(t,e){!0===e&&!1===t&&this.bodyClickListener.stop((function(t){}))}},computed:{ctxStyle:function(){return{display:this.ctxVisible?"block":"none",top:(this.ctxTop||0)+"px",left:(this.ctxLeft||0)+"px"}}}},c=(i(354),i(1)),o=Object(c.a)(a,n,[],!1,null,null,null);o.options.__file="src/context-menu/index.vue";e.default=o.exports},63:function(t,e,i){},66:function(t,e,i){var n=i(369);n.install=function(t){return t.component("context-menu",n)},window.VueContextMenu=n,t.exports=t.exports.default=n}});