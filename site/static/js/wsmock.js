webpackJsonp([2],{105:function(t,s,n){"use strict";var e=n(370),i=n(371),c=n(373),o=n(372),a=n(3),r=n.n(a),u=null,d=1;s.a={components:{Card:e.a,List:i.a,Textinput:c.a,Message:o.a},data:function(){return{isDataCenter:!0,sessions:[],currentSessionLocalId:1,filterKey:""}},methods:{search:function(t){this.filterKey=t},selectSession:function(t){this.currentSessionLocalId=t,this.currentSession.hasNewMsg=!1},comingMsg:function(t){t.localId!=this.currentSession.localId&&(t.hasNewMsg=!0)},openSession:function(t){var s=d++;this.currentSessionLocalId=s,this.sessions.push({localId:s,sessionId:"",hasNewMsg:!1,urlPattern:t,messages:[{content:"等待服务器分配调试会话ID",date:new Date,type:"cmd"}]}),u.emit("opensession",t)},closeSession:function(t){var s=r.a.findIndex(this.sessions,function(s){return s.localId==t}),n=this.sessions[s].sessionId;this.sessions.splice(s,1),u.emit("closesession",n),this.currentSessionLocalId==t&&(s>0&&s--,this.currentSessionLocalId=this.sessions[s]&&this.sessions[s].localId)},assignedSessionId:function(t,s){var n=r.a.find(this.sessions,function(s){return s.urlPattern==t});n&&(n.sessionId=s,this.comingMsg(n),n.messages.push({content:"分配到调试会话ID: "+s,date:new Date,type:"cmd"}))},connectionBuild:function(t){var s=r.a.find(this.sessions,function(s){return s.sessionId==t});s&&(this.comingMsg(s),s.messages.push({content:"和目标页面建立调试连接",date:new Date,type:"cmd"}))},sendMsg:function(t){this.currentSession&&(this.currentSession.messages.push({content:t,date:new Date,type:"me"}),u.emit("debuggermsg",this.currentSession.sessionId,t))},recieve:function(t,s){var n=r.a.find(this.sessions,function(s){return s.sessionId==t});n&&(this.comingMsg(n),n.messages.push({content:s,date:new Date,type:"page"}))},connectionBreak:function(t){var s=r.a.find(this.sessions,function(s){return s.sessionId==t});s&&(this.comingMsg(s),s.messages.push({content:"页面终止调试会话，等待新的页面接入调试会话",date:new Date,type:"cmd"}))}},computed:{currentSession:function(){var t=this;return r.a.find(this.sessions,function(s){return s.localId==t.currentSessionLocalId})}},created:function(){window.io&&(u=io("/wsmock"),u.on("assignedsessionid",this.assignedSessionId),u.on("page-msg",this.recieve),u.on("page-connected",this.connectionBuild),u.on("page-closed",this.connectionBreak))}}},106:function(t,s,n){"use strict";s.a={methods:{onKeyup:function(t){this.$dc.search(t.target.value)},requestAddSession:function(){var t=this;this.$prompt("请输入要拦截的WebSocket url特征","新建调试会话",{confirmButtonText:"新建会话",cancelButtonText:"取消"}).then(function(s){var n=s.value;t.$dc.openSession(n)})}}}},107:function(t,s,n){"use strict";s.a={}},108:function(t,s,n){"use strict";var e=n(1);s.a={methods:{showTime:function(t,s){return"cmd"==t.type||0==s||t.date.getTime()-this.$dc.currentSession.messages[s-1].date.getTime()>3e5}},filters:{time:function(t){return"string"==typeof t&&(t=new Date(t)),t.getHours()+":"+t.getMinutes()}},directives:{"scroll-bottom":{componentUpdated:function(t){e.default.nextTick(function(){t.scrollTop=t.scrollHeight-t.clientHeight})}}}}},109:function(t,s,n){"use strict";s.a={data:function(){return{content:""}},methods:{onKeyup:function(t){t.ctrlKey&&13===t.keyCode&&this.content.length&&(this.$dc.sendMsg(this.content),this.content="")}}}},156:function(t,s,n){"use strict";function e(t){n(287)}var i=n(105),c=n(385),o=n(0),a=e,r=n.i(o.a)(i.a,c.a,c.b,!1,a,null,null);s.a=r.exports},204:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=(n(1),n(156),n(24)),i=(n.n(e),n(23));n.n(i);throw new Error('Cannot find module "element-ui/lib/theme-default/index.css"')},282:function(t,s){},283:function(t,s){},284:function(t,s){},285:function(t,s){},287:function(t,s){},370:function(t,s,n){"use strict";function e(t){n(282)}var i=n(106),c=n(376),o=n(0),a=e,r=n.i(o.a)(i.a,c.a,c.b,!1,a,"data-v-1abcd49c",null);s.a=r.exports},371:function(t,s,n){"use strict";function e(t){n(284)}var i=n(107),c=n(391),o=n(0),a=e,r=n.i(o.a)(i.a,c.a,c.b,!1,a,"data-v-53abb758",null);s.a=r.exports},372:function(t,s,n){"use strict";function e(t){n(285)}var i=n(108),c=n(394),o=n(0),a=e,r=n.i(o.a)(i.a,c.a,c.b,!1,a,"data-v-615243e5",null);s.a=r.exports},373:function(t,s,n){"use strict";function e(t){n(283)}var i=n(109),c=n(382),o=n(0),a=e,r=n.i(o.a)(i.a,c.a,c.b,!1,a,"data-v-33d7057a",null);s.a=r.exports},376:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"card"},[n("div",{staticClass:"header"},[n("p",{staticClass:"name"},[t._v("WebSocket Mock")]),t._v(" "),n("p",{staticClass:"add",on:{click:t.requestAddSession}},[t._v("+")])])])},i=[]},382:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"text"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"按 Ctrl + Enter 发送"},domProps:{value:t.content},on:{keyup:t.onKeyup,input:function(s){s.target.composing||(t.content=s.target.value)}}})])},i=[]},385:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"sidebar"},[n("card"),t._v(" "),n("list")],1),t._v(" "),n("div",{staticClass:"main"},[n("message"),t._v(" "),n("textinput")],1)])},i=[]},391:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"list"},[n("ul",t._l(t.$dc.sessions,function(s){return n("li",{staticClass:"session-row",class:{active:s.localId===t.$dc.currentSession.localId,newmsg:s.hasNewMsg},on:{click:function(n){t.$dc.selectSession(s.localId)}}},[n("span",{staticClass:"avatar avatar-img"},[t._v("\n        "+t._s(s.urlPattern.charAt(0))+"\n      ")]),t._v(" "),n("p",{staticClass:"name"},[t._v(t._s(s.urlPattern))]),t._v(" "),n("p",{staticClass:"msg-state"}),t._v(" "),n("p",{staticClass:"close",on:{click:function(n){t.$dc.closeSession(s.localId)}}},[t._v("X")])])}))])},i=[]},394:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{directives:[{name:"scroll-bottom",rawName:"v-scroll-bottom"}],staticClass:"message"},[t.$dc.currentSession?n("ul",t._l(t.$dc.currentSession.messages,function(s,e){return n("li",[t.showTime(s,e)?n("p",{staticClass:"time"},[n("span",[t._v(t._s(t._f("time")(s.date))+" "+t._s("cmd"==s.type?"- "+s.content:""))])]):t._e(),t._v(" "),"cmd"!=s.type?n("div",{staticClass:"main",class:{self:"me"==s.type}},[n("span",{staticClass:"avatar avatar-img"},[t._v("\n            "+t._s("me"==s.type?"我":t.$dc.currentSession.urlPattern.charAt(0))+"\n          ")]),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(s.content))])]):t._e()])})):t._e()])},i=[]}},[204]);
//# sourceMappingURL=wsmock.js.map