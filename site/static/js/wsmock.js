webpackJsonp([2],{112:function(t,s,n){"use strict";var e=n(385),i=n(386),c=n(388),a=n(387),o=n(3),r=n.n(o),u=null,d=1;s.a={components:{Card:e.a,List:i.a,Textinput:c.a,Message:a.a},data:function(){return{isDataCenter:!0,sessions:[],currentSessionLocalId:1,filterKey:""}},methods:{search:function(t){this.filterKey=t},selectSession:function(t){this.currentSessionLocalId=t,this.currentSession.hasNewMsg=!1},comingMsg:function(t){t.localId!=this.currentSession.localId&&(t.hasNewMsg=!0)},openSession:function(t){var s=d++;this.currentSessionLocalId=s,this.sessions.push({localId:s,sessionId:"",hasNewMsg:!1,urlPattern:t,messages:[{content:"等待服务器分配调试会话ID",date:new Date,type:"cmd"}]}),u.emit("opensession",t)},closeSession:function(t){var s=r.a.findIndex(this.sessions,function(s){return s.localId==t}),n=this.sessions[s].sessionId;this.sessions.splice(s,1),u.emit("closesession",n),this.currentSessionLocalId==t&&(s>0&&s--,this.currentSessionLocalId=this.sessions[s]&&this.sessions[s].localId)},assignedSessionId:function(t,s){var n=r.a.find(this.sessions,function(s){return s.urlPattern==t});n&&(n.sessionId=s,this.comingMsg(n),n.messages.push({content:"分配到调试会话ID: "+s,date:new Date,type:"cmd"}))},connectionBuild:function(t){var s=r.a.find(this.sessions,function(s){return s.sessionId==t});s&&(this.comingMsg(s),s.messages.push({content:"和目标页面建立调试连接",date:new Date,type:"cmd"}))},sendMsg:function(t){this.currentSession&&(this.currentSession.messages.push({content:t,date:new Date,type:"me"}),u.emit("debuggermsg",this.currentSession.sessionId,t))},recieve:function(t,s){var n=r.a.find(this.sessions,function(s){return s.sessionId==t});n&&(this.comingMsg(n),n.messages.push({content:s,date:new Date,type:"page"}))},connectionBreak:function(t){var s=r.a.find(this.sessions,function(s){return s.sessionId==t});s&&(this.comingMsg(s),s.messages.push({content:"页面终止调试会话，等待新的页面接入调试会话",date:new Date,type:"cmd"}))}},computed:{currentSession:function(){var t=this;return r.a.find(this.sessions,function(s){return s.localId==t.currentSessionLocalId})}},created:function(){window.io&&(u=io("/wsmock"),u.on("assignedsessionid",this.assignedSessionId),u.on("page-msg",this.recieve),u.on("page-connected",this.connectionBuild),u.on("page-closed",this.connectionBreak))}}},113:function(t,s,n){"use strict";s.a={methods:{onKeyup:function(t){this.$dc.search(t.target.value)},requestAddSession:function(){var t=this;this.$prompt("请输入要拦截的WebSocket url特征","新建调试会话",{confirmButtonText:"新建会话",cancelButtonText:"取消"}).then(function(s){var n=s.value;t.$dc.openSession(n)})}}}},114:function(t,s,n){"use strict";s.a={}},115:function(t,s,n){"use strict";var e=n(1);s.a={methods:{showTime:function(t,s){return"cmd"==t.type||0==s||t.date.getTime()-this.$dc.currentSession.messages[s-1].date.getTime()>3e5}},filters:{time:function(t){return"string"==typeof t&&(t=new Date(t)),t.getHours()+":"+t.getMinutes()}},directives:{"scroll-bottom":{componentUpdated:function(t){e.default.nextTick(function(){t.scrollTop=t.scrollHeight-t.clientHeight})}}}}},116:function(t,s,n){"use strict";s.a={data:function(){return{content:""}},methods:{onKeyup:function(t){t.ctrlKey&&13===t.keyCode&&this.content.length&&(this.$dc.sendMsg(this.content),this.content="")}}}},162:function(t,s,n){"use strict";function e(t){n(297)}var i=n(112),c=n(400),a=n(0),o=e,r=n.i(a.a)(i.a,c.a,c.b,!1,o,null,null);s.a=r.exports},17:function(t,s){},209:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n(1),i=n(162),c=n(26),a=n.n(c),o=n(25),r=n.n(o),u=n(17);n.n(u);e.default.use(r.a),e.default.use(a.a),new e.default({el:"#app",render:function(t){return t(i.a)}})},292:function(t,s){},293:function(t,s){},294:function(t,s){},295:function(t,s){},297:function(t,s){},385:function(t,s,n){"use strict";function e(t){n(292)}var i=n(113),c=n(391),a=n(0),o=e,r=n.i(a.a)(i.a,c.a,c.b,!1,o,"data-v-1abcd49c",null);s.a=r.exports},386:function(t,s,n){"use strict";function e(t){n(294)}var i=n(114),c=n(408),a=n(0),o=e,r=n.i(a.a)(i.a,c.a,c.b,!1,o,"data-v-53abb758",null);s.a=r.exports},387:function(t,s,n){"use strict";function e(t){n(295)}var i=n(115),c=n(411),a=n(0),o=e,r=n.i(a.a)(i.a,c.a,c.b,!1,o,"data-v-615243e5",null);s.a=r.exports},388:function(t,s,n){"use strict";function e(t){n(293)}var i=n(116),c=n(399),a=n(0),o=e,r=n.i(a.a)(i.a,c.a,c.b,!1,o,"data-v-33d7057a",null);s.a=r.exports},391:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"card"},[n("div",{staticClass:"header"},[n("p",{staticClass:"name"},[t._v("WebSocket Mock")]),t._v(" "),n("p",{staticClass:"add",on:{click:t.requestAddSession}},[t._v("+")])])])},i=[]},399:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"text"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"按 Ctrl + Enter 发送"},domProps:{value:t.content},on:{keyup:t.onKeyup,input:function(s){s.target.composing||(t.content=s.target.value)}}})])},i=[]},400:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"sidebar"},[n("card"),t._v(" "),n("list")],1),t._v(" "),n("div",{staticClass:"main"},[n("message"),t._v(" "),n("textinput")],1)])},i=[]},408:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"list"},[n("ul",t._l(t.$dc.sessions,function(s){return n("li",{staticClass:"session-row",class:{active:s.localId===t.$dc.currentSession.localId,newmsg:s.hasNewMsg},on:{click:function(n){t.$dc.selectSession(s.localId)}}},[n("span",{staticClass:"avatar avatar-img"},[t._v("\n        "+t._s(s.urlPattern.charAt(0))+"\n      ")]),t._v(" "),n("p",{staticClass:"name"},[t._v(t._s(s.urlPattern))]),t._v(" "),n("p",{staticClass:"msg-state"}),t._v(" "),n("p",{staticClass:"close",on:{click:function(n){t.$dc.closeSession(s.localId)}}},[t._v("X")])])}))])},i=[]},411:function(t,s,n){"use strict";n.d(s,"a",function(){return e}),n.d(s,"b",function(){return i});var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{directives:[{name:"scroll-bottom",rawName:"v-scroll-bottom"}],staticClass:"message"},[t.$dc.currentSession?n("ul",t._l(t.$dc.currentSession.messages,function(s,e){return n("li",[t.showTime(s,e)?n("p",{staticClass:"time"},[n("span",[t._v(t._s(t._f("time")(s.date))+" "+t._s("cmd"==s.type?"- "+s.content:""))])]):t._e(),t._v(" "),"cmd"!=s.type?n("div",{staticClass:"main",class:{self:"me"==s.type}},[n("span",{staticClass:"avatar avatar-img"},[t._v("\n            "+t._s("me"==s.type?"我":t.$dc.currentSession.urlPattern.charAt(0))+"\n          ")]),t._v(" "),n("div",{staticClass:"text"},[t._v(t._s(s.content))])]):t._e()])})):t._e()])},i=[]}},[209]);
//# sourceMappingURL=wsmock.js.map